# PR_REVIEW_GUIDE.md

Kumihan-Formatter のPRレビューガイド

## 📋 目次

1. [レビュー観点](#-レビュー観点)
2. [レビューコメントのテンプレート](#-レビューコメントのテンプレート)
3. [レビュー結果の記載方法](#-レビュー結果の記載方法)

---

## 🔍 レビュー観点

### 必須チェック項目

1. **コード品質**: 既存のコーディング規約に準拠しているか
2. **テスト**: 変更に対する適切なテストが実施されているか
3. **ドキュメント**: 必要な更新が行われているか
4. **影響範囲**: 他の機能への影響がないか

### 詳細チェックポイント

- ✅ Black によるフォーマットが適用されている
- ✅ 型ヒントが適切に使用されている
- ✅ テストが全てパスしている（make test で確認）
- ✅ 変更内容がIssueの要件を満たしている

---

## 📝 レビューコメントのテンプレート

### ✅ Approved例

```markdown
## レビュー結果: ✅ Approved

### レビュー観点
1. **コード品質**: 既存のコーディング規約に準拠しているか
2. **テスト**: 変更に対する適切なテストが実施されているか
3. **ドキュメント**: 必要な更新が行われているか
4. **影響範囲**: 他の機能への影響がないか

### 確認結果
- ✅ Black によるフォーマットが適用されている
- ✅ 型ヒントが適切に使用されている
- ✅ テストが全てパスしている（make test で確認）
- ✅ 変更内容が Issue #XXX の要件を満たしている

このPRは問題なくマージ可能です。
```

### ❌ Changes Requested例

```markdown
## レビュー結果: ❌ Changes Requested

### レビュー観点と問題点
1. **テスト不足**: 新規追加した機能に対するテストケースがありません
   - `src/new_feature.py` の `process_data()` メソッドのテストを追加してください

2. **エラーハンドリング**: 異常系の処理が不十分です
   - ファイル読み込み失敗時の例外処理を追加してください（src/utils.py:45）

修正後、再度レビューします。
```

### 💡 Comment例（軽微な指摘）

```markdown
## レビューコメント: 💡 Comment

### 軽微な改善提案
1. **命名**: 変数名をより分かりやすくできます
   - `data` → `parsed_content` など
   
2. **コメント**: 複雑なロジックにコメントがあると良いです
   - L45-60の処理について説明があると理解しやすいです

これらは必須ではありませんが、検討いただけると幸いです。
```

---

## 📊 レビュー結果の記載方法

### レビュー状態

| 状態 | 説明 | 次のアクション |
|------|------|----------------|
| ✅ **Approved** | 問題なし、マージ可能 | マージ実行 |
| ❌ **Changes Requested** | 修正が必要 | 修正後、再レビュー依頼 |
| 💡 **Comment** | 軽微な提案のみ | 作成者判断でマージ可能 |

### レビュー観点の優先度

| 優先度 | 観点 | 対応 |
|--------|------|------|
| **必須** | セキュリティ、機能要件 | Changes Requested |
| **重要** | コード品質、テスト | Changes Requested |
| **推奨** | 命名、コメント | Comment |

---

## 🎯 効果的なレビューのコツ

### レビュアー側
1. **建設的なフィードバック**: 問題を指摘するだけでなく、改善案も提示
2. **具体的な指摘**: ファイル名・行数を明記
3. **優先度の明示**: 必須修正か推奨改善かを明確に

### 作成者側
1. **セルフレビュー**: PR作成前に自分でコードを確認
2. **説明の充実**: PRの背景・変更理由を詳しく記載
3. **テスト実行**: レビュー依頼前に品質チェックを完了

---

**建設的なレビューで品質向上を！ 🔍**