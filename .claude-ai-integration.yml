# Claude Code AIçµ±åˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
# Issue804 Phase B.4 AIæœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨çµ±åˆè¨­å®š
# 68.8%å‰Šæ¸›é”æˆã‚·ã‚¹ãƒ†ãƒ ã¨serenaãƒ„ãƒ¼ãƒ«ã®é«˜åº¦çµ±åˆ

project_name: "Kumihan-Formatter"
config_type: "ai_integration"
version: "1.0.0"
created: "2025-08-05"

# ğŸ¤– AIæœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ çµ±åˆè¨­å®š
ai_system:
  # Phase B.4ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
  phase_b4:
    enabled: true
    system_path: "kumihan_formatter.core.optimization.ai_optimization"
    integration_level: "full"           # basic, standard, full
    auto_initialization: true

  # ã‚³ã‚¢AIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  core_components:
    ai_optimizer_core:
      enabled: true
      module: "ai_optimizer_core.AIOptimizerCore"
      priority: "high"

    prediction_engine:
      enabled: true
      module: "prediction_engine.PredictionEngine"
      accuracy_target: 85.0
      cache_enabled: true

    learning_system:
      enabled: true
      module: "learning_system.LearningSystem"
      online_learning: true
      update_frequency: "adaptive"

    autonomous_controller:
      enabled: true
      module: "autonomous_controller.AutonomousController"
      intervention_level: "moderate"    # minimal, moderate, aggressive

    ai_integration_manager:
      enabled: true
      module: "ai_integration_manager.AIIntegrationManager"
      coordination_mode: "smart"

# ğŸ”— serenaãƒ„ãƒ¼ãƒ«çµ±åˆè¨­å®š
serena_integration:
  # çµ±åˆãƒ¬ãƒ™ãƒ«è¨­å®š
  integration:
    level: "deep"                       # surface, standard, deep
    ai_enhancement: true
    predictive_optimization: true
    adaptive_parameters: true

  # AIã‚¨ãƒ³ãƒãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨­å®š
  ai_enhancement:
    # ãƒ„ãƒ¼ãƒ«åˆ¥æœ€é©åŒ–
    find_symbol:
      ai_prediction: true
      context_optimization: true
      result_ranking: true

    search_for_pattern:
      smart_filtering: true
      relevance_scoring: true
      duplicate_elimination: true

    get_symbols_overview:
      adaptive_depth: true
      context_aware_limits: true
      intelligent_summarization: true

    replace_symbol_body:
      change_prediction: true
      impact_analysis: true
      safety_validation: true

    insert_after_symbol:
      position_optimization: true
      context_analysis: true
      conflict_detection: true

  # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–è¨­å®š
  parameter_optimization:
    # å‹•çš„èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ 
    dynamic_adjustment:
      enabled: true
      ai_driven: true
      context_aware: true
      performance_based: true

    # å…·ä½“çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š
    parameters:
      max_answer_chars:
        optimization_strategy: "ai_adaptive"
        base_value: 200000
        ai_multiplier_range: [0.25, 2.5]
        context_scaling_factor: 1.2
        performance_threshold: 60.0

      depth:
        dynamic_adjustment: true
        context_based_max: 10
        ai_recommendation: true

      substring_matching:
        ai_suggestion: true
        context_optimization: true

      include_body:
        smart_decision: true
        size_aware: true
        relevance_based: true

# ğŸ§  æ©Ÿæ¢°å­¦ç¿’ãƒ»äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ 
ml_prediction:
  # äºˆæ¸¬ã‚¨ãƒ³ã‚¸ãƒ³è¨­å®š
  prediction_engine:
    # äºˆæ¸¬å¯¾è±¡
    targets:
      operation_efficiency: true
      parameter_optimization: true
      result_relevance: true
      response_time: true

    # äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«è¨­å®š
    models:
      efficiency_predictor:
        type: "lightgbm"
        features: ["operation_type", "context_size", "history_pattern"]
        accuracy_target: 85.0

      parameter_optimizer:
        type: "xgboost"
        features: ["content_complexity", "user_pattern", "performance_history"]
        optimization_target: "token_efficiency"

      relevance_scorer:
        type: "neural_network"
        features: ["semantic_similarity", "context_relevance", "user_intent"]
        enabled: false                  # å°†æ¥å®Ÿè£…äºˆå®š

  # å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
  learning_system:
    # ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’
    online_learning:
      enabled: true
      learning_rate: 0.01
      batch_size: 32
      update_frequency: "hourly"

    # ãƒ‡ãƒ¼ã‚¿åé›†
    data_collection:
      operation_logs: true
      performance_metrics: true
      user_feedback: true
      system_responses: true

    # ãƒ¢ãƒ‡ãƒ«ç®¡ç†
    model_management:
      version_control: true
      a_b_testing: true
      rollback_capability: true
      performance_monitoring: true

# ğŸ“Š åŠ¹æœæ¸¬å®šãƒ»ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
monitoring_integration:
  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
  real_time_monitoring:
    enabled: true
    metrics_collection: "continuous"
    performance_tracking: true
    anomaly_detection: true

  # åŠ¹æœæ¸¬å®šæŒ‡æ¨™
  metrics:
    # ä¸»è¦åŠ¹æœæŒ‡æ¨™
    primary_metrics:
      token_reduction_rate:
        target: 68.8
        measurement_frequency: "per_operation"
        alert_threshold: 60.0

      prediction_accuracy:
        target: 85.0
        measurement_frequency: "continuous"
        alert_threshold: 80.0

      response_time_improvement:
        target: 2.0                     # ç§’ä»¥ä¸‹
        measurement_frequency: "per_operation"
        alert_threshold: 5.0

    # å‰¯æ¬¡åŠ¹æœæŒ‡æ¨™
    secondary_metrics:
      ai_intervention_success_rate:
        target: 90.0
        measurement_frequency: "hourly"

      cache_hit_rate:
        target: 70.0
        measurement_frequency: "continuous"

      user_satisfaction_score:
        target: 8.0                     # 10ç‚¹æº€ç‚¹
        measurement_frequency: "daily"

  # ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
  alerting:
    # ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
    alerts:
      performance_degradation:
        threshold: 10.0                 # 10%æ€§èƒ½ä½ä¸‹
        action: "auto_adjustment"
        notification: true

      ai_system_error:
        threshold: "any_error"
        action: "fallback_mode"
        notification: true

      efficiency_target_miss:
        threshold: 5.0                  # ç›®æ¨™ã‹ã‚‰5%ä»¥ä¸Šä¹–é›¢
        action: "parameter_adjustment"
        notification: false

    # é€šçŸ¥è¨­å®š
    notifications:
      channels: ["log", "file"]         # log, file, email, slack
      severity_levels: ["error", "warning"]
      frequency_limit: "5_per_hour"

# ğŸ”§ è‡ªå‹•æœ€é©åŒ–ãƒ»é©å¿œã‚·ã‚¹ãƒ†ãƒ 
auto_optimization:
  # è‡ªå‹•æœ€é©åŒ–è¨­å®š
  optimization:
    enabled: true
    optimization_level: "moderate"     # minimal, moderate, aggressive
    learning_enabled: true

  # é©å¿œã‚·ã‚¹ãƒ†ãƒ 
  adaptation:
    # ç’°å¢ƒé©å¿œ
    environment_adaptation:
      enabled: true
      context_learning: true
      usage_pattern_recognition: true
      performance_optimization: true

    # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é©å¿œ
    parameter_adaptation:
      enabled: true
      ai_driven_adjustment: true
      performance_based_tuning: true
      user_preference_learning: true

    # æˆ¦ç•¥é©å¿œ
    strategy_adaptation:
      enabled: true
      multi_strategy_testing: true
      best_strategy_selection: true
      continuous_improvement: true

  # è‡ªå‹•èª¿æ•´ãƒˆãƒªã‚¬ãƒ¼
  triggers:
    performance_triggers:
      efficiency_drop: 5.0              # 5%åŠ¹ç‡ä½ä¸‹
      response_time_increase: 2.0       # 2ç§’å¿œç­”æ™‚é–“å¢—
      error_rate_increase: 10.0         # 10%ã‚¨ãƒ©ãƒ¼ç‡å¢—

    learning_triggers:
      new_data_threshold: 100           # 100æ–°è¦ãƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’é–‹å§‹
      accuracy_drop: 5.0                # 5%ç²¾åº¦ä½ä¸‹ã§å†å­¦ç¿’
      model_staleness: 24               # 24æ™‚é–“ã§ãƒ¢ãƒ‡ãƒ«æ›´æ–°æ¤œè¨

# ğŸ›¡ï¸ å®‰å…¨æ€§ãƒ»ä¿¡é ¼æ€§è¨­å®š
safety_reliability:
  # å®‰å…¨æ€§è¨­å®š
  safety:
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
    fallback:
      enabled: true
      trigger_conditions:
        - "ai_system_failure"
        - "performance_degradation_severe"
        - "prediction_accuracy_critical"
      fallback_mode: "traditional_serena"
      recovery_validation: true

    # åˆ¶é™ãƒ»åˆ¶ç´„
    constraints:
      max_parameter_change: 50.0        # æœ€å¤§50%ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´
      min_efficiency_threshold: 50.0    # æœ€ä½50%åŠ¹ç‡ç¶­æŒ
      max_response_time: 10.0           # æœ€å¤§10ç§’å¿œç­”æ™‚é–“

    # æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ 
    validation:
      pre_optimization_check: true
      post_optimization_validation: true
      rollback_on_failure: true

  # ä¿¡é ¼æ€§è¨­å®š
  reliability:
    # å†—é•·æ€§
    redundancy:
      backup_systems: true
      multiple_prediction_models: true
      fallback_configurations: true

    # å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ 
    recovery:
      automatic_recovery: true
      health_check_frequency: 60        # 60ç§’é–“éš”
      recovery_attempts: 3
      escalation_procedures: true

# ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ»é–‹ç™ºæ”¯æ´
development_support:
  # ãƒ‡ãƒãƒƒã‚°è¨­å®š
  debugging:
    enabled: false                      # æœ¬ç•ªã§ã¯ç„¡åŠ¹
    verbose_logging: false
    operation_tracing: false
    performance_profiling: false

  # é–‹ç™ºæ”¯æ´æ©Ÿèƒ½
  development_features:
    configuration_validation: true
    parameter_suggestions: true
    optimization_recommendations: true
    performance_insights: true

  # ãƒ†ã‚¹ãƒˆæ”¯æ´
  testing_support:
    test_mode: false
    mock_ai_responses: false
    performance_simulation: false
    stress_testing: false

# ğŸ“‹ è¨­å®šãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»äº’æ›æ€§
metadata:
  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
  version_info:
    config_version: "1.0.0"
    ai_system_version: "Phase_B4_v1.0"
    serena_compatibility: ">=1.0.0"
    claude_code_compatibility: ">=1.0.0"

  # ä¾å­˜é–¢ä¿‚
  dependencies:
    required:
      - "kumihan_formatter.core.optimization.ai_optimization"
      - "kumihan_formatter.core.utilities.performance_metrics"
    optional:
      - "numpy>=1.21.0"
      - "scikit-learn>=1.0.0"
      - "lightgbm>=3.0.0"
      - "xgboost>=1.5.0"

  # è¨­å®šæ¤œè¨¼
  validation:
    schema_version: "1.0.0"
    last_validated: "2025-08-05T00:00:00Z"
    validation_checksum: "auto_generated"

  # æ›´æ–°å±¥æ­´
  changelog:
    - version: "1.0.0"
      date: "2025-08-05"
      changes:
        - "åˆæœŸAIçµ±åˆè¨­å®šå®Ÿè£…"
        - "Phase B.4ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨çµ±åˆ"
        - "serenaãƒ„ãƒ¼ãƒ«é«˜åº¦çµ±åˆ"
        - "68.8%å‰Šæ¸›åŠ¹æœå¯¾å¿œè¨­å®š"
