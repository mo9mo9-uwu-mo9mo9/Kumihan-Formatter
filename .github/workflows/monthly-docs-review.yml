name: Monthly Documentation Review

on:
  schedule:
    - cron: '0 0 * * MON'
  workflow_dispatch:

jobs:
  create-review-issue:
    name: Create Monthly Review Issue
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Check if first Monday
      id: check_date
      run: |
        TODAY=$(date +%d)
        if [ "$TODAY" -le 7 ]; then
          echo "is_first_monday=true" >> $GITHUB_OUTPUT
        else
          echo "is_first_monday=false" >> $GITHUB_OUTPUT
        fi
    
    - name: Create documentation review issue
      if: steps.check_date.outputs.is_first_monday == 'true'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        YEAR_MONTH=$(date +"%Y-%m")
        
        gh issue create \
          --title "Monthly Documentation Review - $YEAR_MONTH" \
          --body "## Monthly Documentation Review

This issue was automatically generated for periodic documentation quality checks.

### Review Checklist

- [ ] Check if new features are reflected in README.md
- [ ] Check if specification changes are reflected in SPEC.md
- [ ] Check if roadmap matches reality (CLAUDE.md)
- [ ] Check if sample files reflect the latest features
- [ ] Check version information consistency
- [ ] Check external link validity

### Recommended Actions

- Update outdated information
- Add usage examples for new features
- Improve documentation structure
- Enhance usability

---

This issue was automatically generated by the monthly-docs-review workflow." \
          --label "ドキュメント" \
          --label "優先度:中" \
          --assignee mo9mo9-uwu-mo9mo9