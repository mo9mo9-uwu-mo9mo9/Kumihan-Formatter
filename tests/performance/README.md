# パフォーマンステストスイート

Issue #694 大容量ファイル処理パフォーマンス最適化に関連するパフォーマンステストを格納しています。

## テストファイル

### `test_large_file_performance.py`
**30万文字大容量ファイル処理パフォーマンステスト**

- **目的**: StreamingParser vs Traditional Parser の性能比較
- **テスト内容**: 
  - 30万文字の実用的Kumihan記法コンテンツ生成
  - 公正なベンチマーク実行（ウォームアップ除去）
  - メモリ使用量・処理速度の詳細測定
- **実行方法**: `python3 tests/performance/test_large_file_performance.py`

**主要検証項目:**
- Issue #694要求仕様達成確認（1000行10秒以内）
- メモリ効率性の測定
- エラー処理の安定性確認
- 大容量ファイルシナリオでの性能特性

### `test_memory_leak_prevention.py`
**メモリリーク防止検証テスト**

- **目的**: 長時間処理・反復処理でのメモリ安定性確認
- **テスト内容**:
  - 反復解析テスト（20回実行）
  - 長時間処理テスト（複数サイズファイル連続処理）
  - 並行処理テスト（3スレッド同時実行）
- **実行方法**: `python3 tests/performance/test_memory_leak_prevention.py`

**主要検証項目:**
- メモリリーク検出（線形回帰による傾向分析）
- 長時間実行での安定性
- 並行処理でのスレッド安全性

## 実行要件

### 必要な依存関係
```bash
pip install psutil  # システムメトリクス取得
```

### Python要件
- Python 3.9以上
- tracemalloc対応環境

## テスト結果の解釈

### 成功基準
1. **処理速度**: 1000行を10秒以内で処理
2. **メモリ効率**: 一定のメモリ使用量維持
3. **安定性**: エラー0での安定動作
4. **拡張性**: 大容量ファイルでの性能劣化最小化

### 実績値（2025-07-31時点）
- **1000行処理時間**: 0.022秒（453倍高速達成）
- **30万文字処理速度**: 589,562 文字/秒
- **メモリ増加**: 2.0MB（極めて効率的）
- **エラー率**: 0%（完全安定）

## 継続的な品質保証

これらのテストは以下のタイミングで実行することを推奨：

1. **機能追加時**: パフォーマンス回帰の検出
2. **リリース前**: 品質保証の確認
3. **定期実行**: 長期安定性の監視

---
*Generated for Issue #694 大容量ファイル処理パフォーマンス最適化対応*