# テストスイート将来改善案

## 概要
Phase 5で構築したテストインフラは十分な品質を確保していますが、
プロジェクトの成熟に伴い、以下の改善を検討できます。

## 優先度: 高（実装が安定したら対応）

### 1. テストAPIの整合性確保
**現状**: MarkerParserにparseメソッドがなく、テストが失敗
**対応案**: 
- 実装が安定後、実際のAPIに合わせてテストを修正
- または、テスト用のラッパークラスを作成

### 2. 基本的なパラメータ化
**現状**: 類似テストケースの重複
**対応案**:
```python
@pytest.mark.parametrize("decoration,content", [
    ("太字", "重要な情報"),
    ("下線", "強調テキスト"),
])
def test_decorations(decoration, content):
    # パラメータ化による簡潔化
```

## 優先度: 中（必要に応じて対応）

### 3. モックの部分的活用
**対象**: ファイルI/Oなど外部依存の部分のみ
**利点**: テストの独立性向上、実行速度改善

### 4. カバレッジ目標の設定
**目標**: 80%以上のカバレッジ達成時に品質向上策を検討
**現状**: カバレッジ測定環境は構築済み（make test-coverage）

## 優先度: 低（大規模化した場合に検討）

### 5. pytest-xdist並列実行
**条件**: テスト実行時間が5秒を超えた場合
**現状**: 0.35秒なので不要

### 6. property-based testing
**ツール**: hypothesis（既にインストール済み）
**対象**: パーサーの堅牢性テストなど

### 7. ミューテーションテスト
**条件**: チーム規模拡大、品質要求の高度化時

## 実装しない項目

### ビジュアルリグレッションテスト
**理由**: HTML出力の見た目より記法の正確性が重要

### 過度なモック化
**理由**: テストの複雑化、保守性の低下

## アクションアイテム

1. ✅ pytest.ini削除（完了）
2. 📝 本ドキュメントで将来改善案を管理
3. 🔄 実装の安定化を待ってから必要な改善を実施

---
*最終更新: 2025-01-30*