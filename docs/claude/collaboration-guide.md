# Claude-Geminiå”æ¥­ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

Claude-Geminiå”æ¥­ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Claudeï¼ˆPM/Managerï¼‰ã¨Geminiï¼ˆCoderï¼‰ã®æ˜ç¢ºãªå½¹å‰²åˆ†æ‹…ã«ã‚ˆã‚Šã€Tokenå‰Šæ¸›90%ä»¥ä¸Šã¨ã‚³ã‚¹ãƒˆåŠ¹ç‡åŒ–ã‚’å®Ÿç¾ã™ã‚‹é–‹ç™ºæ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### å½¹å‰²åˆ†æ‹…
```
Claude (PM/Manager)           Gemini-2.5-flash (Coder)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ è¦ä»¶åˆ†æãƒ»è¨­è¨ˆ    â”‚ â†’  â”‚ â€¢ å®Ÿè£…ãƒ»ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ     â”‚
â”‚ â€¢ ä½œæ¥­æŒ‡ç¤ºæ›¸ä½œæˆ    â”‚    â”‚ â€¢ å‹æ³¨é‡ˆãƒ»docstring    â”‚
â”‚ â€¢ å“è³ªç®¡ç†ãƒ»èª¿æ•´    â”‚ â†  â”‚ â€¢ åŸºæœ¬æ§‹æ–‡ãƒã‚§ãƒƒã‚¯     â”‚
â”‚ â€¢ ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ»æ‰¿èª  â”‚    â”‚ â€¢ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–è¨­è¨ˆ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å“è³ªä¿è¨¼3å±¤æ¤œè¨¼
- **Layer 1**: Geminiè‡ªå‹•æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
- **Layer 2**: MyPy/Flake8/Blackå“è³ªæ¤œè¨¼
- **Layer 3**: Claudeæœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èª

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åˆæœŸè¨­å®š

```bash
# 1. ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install google-generativeai

# 2. Gemini API ã‚­ãƒ¼è¨­å®š
python gemini_reports/api_config.py --setup

# 3. æ¥ç¶šãƒ†ã‚¹ãƒˆ
python gemini_reports/gemini_api_executor.py --test
```

### 2. åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```bash
# è¦ä»¶åˆ†æã®ã¿å®Ÿè¡Œ
python -m gemini_reports.claude_gemini_orchestrator --analyze "å®Ÿè£…å†…å®¹"

# å®Œå…¨å”æ¥­å®Ÿè¡Œ
python -m gemini_reports.claude_gemini_orchestrator --request "å®Ÿè£…å†…å®¹"

# çµ±è¨ˆæƒ…å ±ç¢ºèª
python -m gemini_reports.claude_gemini_orchestrator --stats
```

### 3. ã‚¿ã‚¹ã‚¯é©æ€§åˆ¤å®š

#### Geminié©æ€§ãŒé«˜ã„ã‚¿ã‚¹ã‚¯
- MyPyå‹æ³¨é‡ˆä¿®æ­£
- Flake8/Blackæ•´å½¢
- å®šå‹çš„ãªãƒã‚°ä¿®æ­£
- è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ‹¬å‡¦ç†
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿè£…

#### Claudeå°‚ä»»ãŒé©åˆ‡ãªã‚¿ã‚¹ã‚¯
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
- è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…
- æ–°æ©Ÿèƒ½è¨­è¨ˆ
- è¦ä»¶ã®æ›–æ˜§ãªã‚¿ã‚¹ã‚¯

## ğŸ“Š åŠ¹æœæ¸¬å®š

### Tokenå‰Šæ¸›åŠ¹æœ
```
å¾“æ¥ï¼ˆClaudeå˜ç‹¬ï¼‰: 25,000-40,000 Token
å”æ¥­å¾Œ: 1,500-3,000 Token
å‰Šæ¸›ç‡: 94-96%
```

### ã‚³ã‚¹ãƒˆå‰Šæ¸›åŠ¹æœ
```
Claude: $75/1Må‡ºåŠ›Token
Gemini: $2.50/1Må‡ºåŠ›Token
å‰Šæ¸›ç‡: 96.7%
```

### æ™‚é–“çŸ­ç¸®åŠ¹æœ
```
å¾“æ¥: 60-90åˆ†
å”æ¥­å¾Œ: 12-15åˆ†
çŸ­ç¸®ç‡: 80-85%
```

## âš™ï¸ è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

### APIè¨­å®š (`gemini_reports/api_config.py`)
```python
# ç’°å¢ƒå¤‰æ•°è¨­å®š
export GEMINI_API_KEY="your_api_key_here"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨
python gemini_reports/api_config.py --set-key "your_key" --method file
```

### å®Ÿè¡Œãƒ¬ãƒ™ãƒ«èª¿æ•´
```python
# claude_gemini_orchestrator.pyå†…ã§èª¿æ•´å¯èƒ½
self.max_retries = 3           # ãƒªãƒˆãƒ©ã‚¤å›æ•°
self.quota_retry_delay = 60    # ã‚¯ã‚©ãƒ¼ã‚¿åˆ¶é™æ™‚å¾…æ©Ÿ
self.retry_delays = [1, 5, 15] # ãƒªãƒˆãƒ©ã‚¤é–“éš”
```

## ğŸ”„ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ¨™æº–çš„ãªå®Ÿè¡Œãƒ•ãƒ­ãƒ¼
1. **è¦ä»¶åˆ†æ** (Claude): ã‚¿ã‚¹ã‚¯ã®è¤‡é›‘åº¦ãƒ»é©æ€§åˆ¤å®š
2. **ä½œæ¥­æŒ‡ç¤ºæ›¸ä½œæˆ** (Claude): è©³ç´°ãªå®Ÿè£…æŒ‡ç¤º
3. **å®Ÿè£…å®Ÿè¡Œ** (Gemini): APIçµŒç”±ã§ã®å®Ÿè£…
4. **å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼** (Claude): 3å±¤æ¤œè¨¼ãƒ»æœ€çµ‚èª¿æ•´

### å¤±æ•—æ™‚ã®å¯¾å¿œãƒ•ãƒ­ãƒ¼
1. **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤**: æœ€å¤§3å›ã®è‡ªå‹•å†è©¦è¡Œ
2. **ã‚¨ãƒ©ãƒ¼åˆ†æ**: åŸå› åˆ¥ã®å¯¾å¿œç­–å®Ÿè¡Œ
3. **ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•**: Claudeä»£æ›¿å®Ÿè¡Œ
4. **å­¦ç¿’ãƒ‡ãƒ¼ã‚¿åŒ–**: æ”¹å–„ã®ãŸã‚ã®è¨˜éŒ²

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
gemini_reports/
â”œâ”€â”€ api_config.py                    # APIè¨­å®šç®¡ç†
â”œâ”€â”€ claude_gemini_orchestrator.py    # ãƒ¡ã‚¤ãƒ³ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”œâ”€â”€ gemini_api_executor.py          # Gemini APIå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ work_instructions/              # ä½œæ¥­æŒ‡ç¤ºæ›¸ä¿å­˜
â”œâ”€â”€ execution_results/              # å®Ÿè¡Œçµæœä¿å­˜
â””â”€â”€ orchestration_log.json         # å®Ÿè¡Œãƒ­ã‚°
```

## ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### åŠ¹æœçš„ãªæŒ‡ç¤ºã®æ›¸ãæ–¹
```bash
# Good: å…·ä½“çš„ã§æ˜ç¢º
python -m gemini_reports.claude_gemini_orchestrator --request \
  "core/parser.pyã®MyPyå‹æ³¨é‡ˆã‚¨ãƒ©ãƒ¼5ä»¶ã‚’ä¿®æ­£ã€‚no-untyped-defå¯¾å¿œ"

# Avoid: æ›–æ˜§ã§è¤‡é›‘
python -m gemini_reports.claude_gemini_orchestrator --request \
  "ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’è¦‹ç›´ã—ã¦å“è³ªã‚’å‘ä¸Šã•ã›ã¦"
```

### å¤§è¦æ¨¡ã‚¿ã‚¹ã‚¯ã®åˆ†å‰²
```bash
# æ®µéšçš„å®Ÿè¡Œ
1. python -m gemini_reports.claude_gemini_orchestrator --request "MyPyä¿®æ­£ã®ã¿"
2. python -m gemini_reports.claude_gemini_orchestrator --request "Flake8ä¿®æ­£ã®ã¿" 
3. python -m gemini_reports.claude_gemini_orchestrator --request "Blackæ•´å½¢ã®ã¿"
```

## ğŸ” ç›£è¦–ãƒ»ãƒ‡ãƒãƒƒã‚°

### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«èª¿æ•´
```python
import logging
logging.getLogger('gemini_reports').setLevel(logging.DEBUG)
```

### çµ±è¨ˆç›£è¦–
```bash
# å®šæœŸçš„ãªæˆåŠŸç‡ç¢ºèª
python -m gemini_reports.claude_gemini_orchestrator --stats

# ã‚¨ãƒ©ãƒ¼è©³ç´°ç¢ºèª
python gemini_reports/gemini_api_executor.py --stats
```

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»å•é¡Œå ±å‘Š

### å•é¡Œç™ºç”Ÿæ™‚ã®ç¢ºèªé …ç›®
1. **API ã‚­ãƒ¼è¨­å®šç¢ºèª**: `python gemini_reports/api_config.py --status`
2. **æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: `python gemini_reports/gemini_api_executor.py --test`
3. **ãƒ­ã‚°ç¢ºèª**: å®Ÿè¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
4. **çµ±è¨ˆç¢ºèª**: æˆåŠŸç‡ãƒ»ã‚¨ãƒ©ãƒ¼åˆ†å¸ƒ

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•
- **APIã‚¯ã‚©ãƒ¼ã‚¿åˆ¶é™**: æ™‚é–“ã‚’ãŠã„ã¦å†å®Ÿè¡Œ
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼**: æ¥ç¶šç’°å¢ƒç¢ºèª
- **èªè¨¼ã‚¨ãƒ©ãƒ¼**: APIã‚­ãƒ¼å†è¨­å®š

è©³ç´°ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ [troubleshooting.md](troubleshooting.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

*Updated: 2025-08-15 | Version: 1.0*