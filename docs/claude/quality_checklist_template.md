# Gemini協業品質チェックリスト

> **目的**: Gemini協業完了後のClaude品質保証チェック  
> **対象**: Issue #920改善対応 - 作業漏れ防止システム  
> **実行者**: Claude（PM/Manager）  

---

## 🔍 Phase 1: 基本品質チェック（必須・自動実行）

### コマンド実行チェック
```bash
# 1. Linting チェック
[ ] make lint
    → Black formatting: ✅ PASS / ❌ FAIL
    → エラー件数: [X] 件

# 2. テスト実行
[ ] make test
    → 実行テスト数: [X]/[Y] tests
    → 結果: ✅ PASS / ❌ FAIL
    → 失敗テスト: [具体的なテスト名]

# 3. Git状態確認
[ ] git status
    → 意図しない変更: ✅ なし / ⚠️ あり
    → 新規ファイル: [リスト]
    → 変更ファイル: [リスト]
```

### エラー対応
- **lintエラーあり**: Geminiに修正指示を送信
- **テスト失敗**: 失敗原因分析→Geminiに修正指示  
- **意図しない変更**: 変更内容確認→必要に応じて修正

---

## 🔍 Phase 2: 機能・統合チェック（詳細確認）

### API互換性確認
```python
# 既存インターフェース動作確認
[ ] import文の動作確認
    → 既存importが正常動作: ✅ / ❌
    → 新規import追加: [リスト]
    → 削除import: [リスト]

[ ] 公開API動作確認  
    → 既存メソッド呼び出し: ✅ / ❌
    → 戻り値型・構造: ✅ 同一 / ⚠️ 変更あり
    → 破壊的変更: ✅ なし / ❌ あり
```

### コード品質確認
```python
[ ] 型注釈チェック
    → 新規関数の型注釈: ✅ 完備 / ⚠️ 不完全
    → 既存関数の型注釈: ✅ 維持 / ⚠️ 削除・変更
    → mypy strict mode対応: ✅ / ❌

[ ] エラーハンドリング
    → try-except構造: ✅ 適切 / ⚠️ 不十分
    → ログ出力: ✅ 適切 / ⚠️ 不足
    → 例外の適切な伝播: ✅ / ❌

[ ] セキュリティチェック
    → 入力値検証: ✅ 適切 / ⚠️ 不足
    → ファイルアクセス制限: ✅ / ❌
    → 機密情報の適切処理: ✅ / ❌
```

---

## 🔍 Phase 3: 統合・完成度チェック（最終確認）

### 機能統合確認
```python
[ ] 分割・統合されたコードの動作確認
    → 基本機能: ✅ 正常動作 / ❌ 問題あり
    → エッジケース: ✅ 正常動作 / ❌ 未確認
    → パフォーマンス: ✅ 問題なし / ⚠️ 劣化

[ ] 依存関係整合性
    → import文の循環参照: ✅ なし / ❌ あり
    → モジュール間結合: ✅ 適切 / ⚠️ 過結合
    → 未使用import: ✅ 削除済み / ❌ 残存
```

### ドキュメント・保守性
```python
[ ] コメント・ドキュメント
    → 日本語コメント: ✅ 適切 / ⚠️ 不足
    → docstring: ✅ 新規関数に追加 / ⚠️ 不足
    → README更新: ✅ 必要に応じて更新 / ⚠️ 未更新

[ ] 保守性・可読性
    → コード可読性: ✅ 良好 / ⚠️ 改善必要
    → 命名規則: ✅ PEP8準拠 / ⚠️ 不適切
    → モジュール分割: ✅ 適切 / ⚠️ 改善必要
```

---

## 📊 総合評価・判定

### チェック結果サマリー
```
🔍 品質チェック完了

📊 基本品質 (Phase 1):
- Linting: ✅ PASS / ❌ FAIL ([X] errors)
- Tests: ✅ PASS / ❌ FAIL ([X]/[Y] passed) 
- Git Status: ✅ Clean / ⚠️ Issues

📊 機能品質 (Phase 2):
- API互換性: ✅ 維持 / ❌ 破壊
- 型注釈: ✅ 完備 / ⚠️ 不完全
- エラーハンドリング: ✅ 適切 / ⚠️ 不足
- セキュリティ: ✅ 問題なし / ⚠️ 要確認

📊 統合品質 (Phase 3):
- 機能統合: ✅ 完了 / ⚠️ 問題あり
- 依存関係: ✅ 整合 / ❌ 循環参照
- ドキュメント: ✅ 完備 / ⚠️ 不足
- 保守性: ✅ 良好 / ⚠️ 改善必要

🎯 総合判定: ✅ 合格 / ⚠️ 条件付き合格 / ❌ 不合格
```

### 判定基準
- **✅ 合格**: 全項目クリア → PR作成可能
- **⚠️ 条件付き合格**: 軽微な問題あり → 修正後PR作成
- **❌ 不合格**: 重大な問題あり → Geminiに追加修正指示

---

## 🚨 品質問題対応フロー

### 問題分類・対応方針

#### 🔴 Critical（即座対応必須）
- lint/mypyエラー
- テスト失敗
- API破壊的変更
- セキュリティ問題

**対応**: Geminiに即座修正指示

#### 🟡 Warning（PR前対応推奨）
- 型注釈不完全
- ドキュメント不足
- 軽微なコード品質問題

**対応**: 状況に応じてGemini修正 or Claude直接修正

#### 🟢 Info（将来対応）
- パフォーマンス最適化
- 設計改善提案
- 追加機能提案

**対応**: 別Issue作成・将来対応

---

## 📝 チェック完了後のアクション

### 合格時（✅）
1. 品質チェック結果をGeminiに報告
2. 作業完了をユーザーに報告
3. PR作成準備・実行

### 条件付き合格時（⚠️）
1. 問題点をGeminiに明確に指示
2. 修正完了後に再チェック実行
3. 再チェック通過後にPR作成

### 不合格時（❌）
1. 重大な問題をGeminiに詳細報告
2. 修正方針・手順を明確に指示
3. 必要に応じてClaude直接修正
4. 全修正完了後に再チェック

---

## 💡 継続改善のためのデータ収集

### 品質メトリクス記録
```
📊 協業品質データ

実行日時: [YYYY-MM-DD HH:MM]
Issue番号: #[番号]
作業分類: [SIMPLE/MODERATE/COMPLEX]
Gemini初回品質: [✅/⚠️/❌]
修正回数: [X] 回
最終品質: [✅/⚠️/❌]
主要問題: [問題分類]
修正工数: [時間]
効率スコア: [Token節約率 vs 品質達成率]
```

### 学習・改善点
- **成功パターン**: 一発合格時の指示書特徴
- **失敗パターン**: 修正必要時の共通問題
- **改善提案**: 次回以降の指示書・チェック改善

---

*📋 チェックリスト作成: Claude Code - Issue #920品質保証システム改善*