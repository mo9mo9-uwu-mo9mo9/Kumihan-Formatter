# Gemini作業指示書（標準テンプレート）

> **プロジェクト**: Kumihan-Formatter  
> **協業モデル**: Claude(PM/Manager) - Gemini(Coder)  
> **作成日**: [YYYY-MM-DD]  
> **指示者**: Claude  

---

## 🎯 作業概要

### 基本情報
- **Issue番号**: #[番号]
- **作業タイトル**: [具体的なタイトル]
- **作業分類**: [SIMPLE/MODERATE/COMPLEX]
- **推定工数**: [時間]
- **優先度**: [高/中/低]

### 作業内容詳細
[具体的に何を実装・修正・改善するかを詳述]

**対象ファイル**:
- [ ] `[ファイルパス1]` - [作業内容]
- [ ] `[ファイルパス2]` - [作業内容]

---

## ✅ 完了条件（必須）

### 基本品質基準
- [ ] **lint/flake8エラー**: 0件必達
- [ ] **既存テスト**: 全通過必須
- [ ] **API互換性**: 既存インターフェース維持
- [ ] **import文最適化**: 不要インポート削除・適切な配置
- [ ] **型注釈**: mypy対応型注釈適切配置

### 作業固有条件
- [ ] [作業に応じた具体的条件1]
- [ ] [作業に応じた具体的条件2]
- [ ] [作業に応じた具体的条件3]

---

## 🔍 自己チェック項目（実装中確認）

### コード品質
1. **構文チェック**: Pythonファイルの構文エラーなし
2. **import文**: 未使用インポート削除・循環参照回避
3. **命名規則**: PEP8準拠の変数・関数・クラス名
4. **型注釈**: 関数引数・戻り値の型注釈完備
5. **エラーハンドリング**: 適切なtry-except-finally構造

### 機能実装
1. **仕様準拠**: 指示書通りの機能実装
2. **既存API**: 後方互換性維持
3. **テストケース**: 既存テストが全て通過
4. **ログ出力**: 必要箇所に適切なログ記述
5. **セキュリティ**: 明らかな脆弱性なし

### 文書化
1. **コメント**: 複雑な処理に適切な日本語コメント
2. **docstring**: 新規関数・クラスにdocstring追加
3. **README更新**: 必要に応じてドキュメント更新

---

## 📊 完了報告フォーマット

### 実装結果サマリー
```
✅ 作業完了報告

📋 基本情報:
- 作業時間: [実際の作業時間]
- 変更ファイル数: [X]件
- 追加行数: [X]行
- 削除行数: [X]行

🔍 品質チェック結果:
- lint/flake8: ✅ PASS (0 errors)
- 既存テスト: ✅ PASS ([X]/[X] tests)
- 型チェック: ✅ PASS / ⚠️ WARNING / ❌ FAIL
- API互換性: ✅ 維持 / ⚠️ 注意事項あり

📝 実装内容:
- [具体的な実装内容1]
- [具体的な実装内容2]
- [具体的な実装内容3]

🚨 注意事項・制約:
- [あれば記載、なければ「なし」]

💡 改善提案:
- [あれば記載、なければ「なし」]
```

### 詳細変更内容
```
📁 変更ファイル詳細:

1. [ファイルパス1]:
   - [変更内容詳細]
   - [行数変化: +X/-Y]

2. [ファイルパス2]:
   - [変更内容詳細]
   - [行数変化: +X/-Y]

3. [新規ファイル]:
   - [作成理由・内容]
   - [行数: X行]
```

---

## 🚨 重要な実行制約

### 絶対禁止事項
- ❌ **指示書にない独自判断・仕様変更**
- ❌ **品質基準を満たさない状態での完了報告**
- ❌ **既存APIの破壊的変更**
- ❌ **セキュリティリスクのあるコード**
- ❌ **一時ファイルのプロジェクトルート出力**

### 必須遵守事項
- ✅ **指示書の忠実な実行**
- ✅ **段階的進捗報告**
- ✅ **問題発生時の即座報告**
- ✅ **品質チェック全項目クリア**
- ✅ **日本語でのコメント・ドキュメント**

---

## 🔧 トラブルシューティング

### よくある問題と対処法

#### lint/flake8エラー
```bash
# エラー確認
make lint

# 自動修正試行
python3 -m black [ファイル名]
python3 -m isort [ファイル名]
```

#### テスト失敗
```bash
# 詳細確認
python3 -m pytest tests/ -v

# 特定テスト実行
python3 -m pytest tests/test_[対象].py -v
```

#### import エラー
- 循環参照確認: `import`文の順序・依存関係チェック
- 未使用import削除: F401エラーの対象import削除
- 相対import調整: `.`や`..`を使った相対import確認

### エスカレーション基準
以下の場合はClaude に即座にエスカレーション:
- 指示書に不明・曖昧な点がある
- 品質基準をクリアできない技術的制約がある
- 既存システムへの影響が不明
- 予想外のエラー・問題が発生

---

## 📚 参考情報

### プロジェクト固有情報
- **記法仕様**: Kumihan独自ブロック記法 (`# 装飾名 #内容##`)
- **ログ使用**: `from kumihan_formatter.core.utilities.logger import get_logger`
- **設定**: Python 3.12+, Black, isort, mypy strict mode
- **一時ファイル**: 全て `tmp/` 配下に出力

### 品質基準
- **Black**: line-length=88
- **isort**: プロジェクト設定に従う
- **mypy**: strict mode対応
- **テスト**: 既存テスト全通過必須

---

*📝 テンプレート作成: Claude Code - Issue #920改善対応*