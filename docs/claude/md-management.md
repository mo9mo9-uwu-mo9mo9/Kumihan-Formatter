# CLAUDE.md Management System

> Issue #686 完全実装: 3-Phase CLAUDE.md管理システム  
> **実装完了日**: 2025-07-31  
> **ステータス**: ✅ 全Phase完了

## 🎯 システム概要

CLAUDE.mdファイルの肥大化を防止し、持続可能な管理を実現する包括的システムです。

### 📊 実装内容

| Phase | 機能 | ステータス | ファイル |
|-------|------|------------|----------|
| **Phase 1** | 自動監視システム | ✅ 完了 | `.github/workflows/claude-md-management.yml` |
| | GitHub Actions統合 | ✅ 完了 | `Makefile` (claude-check) |
| | ローカル開発支援 | ✅ 完了 | `.pre-commit-config.yaml` |
| **Phase 2** | 構造化管理システム | ✅ 完了 | `.claude_md_config.yaml` |
| | 管理ルール確立 | ✅ 完了 | `docs/claude_md_checklist.md` |
| | 自動最適化 | ✅ 完了 | `scripts/claude_md_manager.py` |
| **Phase 3** | 持続可能運用 | ✅ 完了 | `scripts/issue_completion_integration.py` |
| | プロセス統合 | ✅ 完了 | - |
| | 監視ダッシュボード | ✅ 完了 | `scripts/claude_md_dashboard.py` |

## 🚀 使用方法

### 基本コマンド

```bash
# 基本チェック (推奨: 毎回更新前後に実行)
make claude-check

# 詳細分析
python scripts/claude_md_manager.py check

# 最適化提案
python scripts/claude_md_manager.py optimize

# ダッシュボード生成
python scripts/claude_md_dashboard.py
```

### 開発ワークフロー

1. **更新前**: `make claude-check` で現状確認
2. **更新中**: チェックリスト (`docs/claude_md_checklist.md`) 参照
3. **更新後**: `make claude-check` で制限内確認
4. **PR作成**: GitHub Actions自動チェック実行

## 📋 制限・ルール

### サイズ制限
- **推奨**: 150行 / 8KB以内
- **警告**: 200行 / 10KB
- **セクション**: 20行以内
- **階層**: 3レベル以内 (`###`まで)

### 構造ルール
- 必須セクション: AI運用7原則、基本設定、必須ルール、記法仕様
- 重複コンテンツ禁止
- 古いマーカー (TODO, FIXME等) 定期削除

## 🔧 設定ファイル

### `.claude_md_config.yaml`
システム全体の設定値を管理。制限値調整、最適化設定等。

### `.pre-commit-config.yaml`
コミット前自動チェック。CLAUDE.md更新時に必ず実行。

## 📊 監視機能

### GitHub Actions
- PR作成時: サイズ・構造チェック
- メイン反映時: 履歴トラッキング
- 制限超過時: CI失敗

### ローカル監視
- `make claude-check`: リアルタイムチェック
- pre-commit hook: コミット前検証
- ダッシュボード: 可視化分析

## 🎮 高度な使用方法

### Issue完了時統合
```bash
# Issue完了処理 (GitHub CLI必要)
python scripts/issue_completion_integration.py process-issue --issue 686

# リリース統合
python scripts/issue_completion_integration.py release-integration --version v2.2.0
```

### ダッシュボード分析
```bash
# 包括的分析・グラフ生成
python scripts/claude_md_dashboard.py

# カスタム出力
python scripts/claude_md_dashboard.py --output-dir custom_dashboard
```

### 設定カスタマイズ
```yaml
# .claude_md_config.yaml
limits:
  recommended_lines: 120  # デフォルト150から変更
  max_section_lines: 15   # デフォルト20から変更

optimization:
  auto_fix: true          # 自動修正有効化
```

## 🚨 トラブルシューティング

### 制限超過時
1. `make claude-check` で現状把握
2. `python scripts/claude_md_manager.py optimize` で提案確認
3. 手動で不要セクション削除・統合
4. 外部ドキュメント分離検討

### CI失敗時
1. GitHub ActionsログでCLAUDE.mdチェック結果確認
2. ローカルで `make claude-check` 実行
3. 問題修正後、再プッシュ

### 品質低下時
1. ダッシュボードで品質メトリクス確認
2. 重複コンテンツ・古い情報削除
3. セクション構造見直し

## 📈 運用ベストプラクティス

### 日常運用
- [ ] 更新前後の `make claude-check` 実行習慣化
- [ ] 週次でダッシュボード確認
- [ ] 月次で最適化提案レビュー

### Issue完了時
- [ ] 詳細説明を簡潔な完了記録に変更
- [ ] 関連する古い情報削除
- [ ] 統合スクリプト活用

### リリース時
- [ ] バージョン情報更新
- [ ] 古いバージョン情報履歴化
- [ ] 全体最適化実施

## 🔗 関連ファイル

- **メインシステム**: `scripts/claude_md_manager.py`
- **統合機能**: `scripts/issue_completion_integration.py`
- **ダッシュボード**: `scripts/claude_md_dashboard.py`
- **設定**: `.claude_md_config.yaml`
- **チェックリスト**: `docs/claude_md_checklist.md`
- **GitHub Actions**: `.github/workflows/claude-md-management.yml`

---

## ✨ 成果・効果

### 🎯 目標達成
- [x] PR時自動サイズチェック
- [x] 肥大化検出・警告システム
- [x] 構造化管理ルール確立
- [x] 自動最適化提案機能
- [x] Issue完了フロー統合
- [x] 継続的監視ダッシュボード

### 📊 期待効果
- **CLAUDE.md肥大化防止**: 自動監視により制限内維持
- **開発効率向上**: チェックリスト・自動化による作業標準化
- **品質維持**: 重複削除・構造最適化による可読性向上
- **持続可能性**: Issue完了・リリース統合による長期運用

---

*✨ Generated by Claude Code for Issue #686 - CLAUDE.md Management System Complete Implementation*