# テンプレート品質管理ガイド

> **目的**: サンプルファイル・テンプレートファイルの品質保証とKumihan記法準拠の徹底

---

## 📋 品質管理原則

### 1. **記法準拠の徹底**
- 全テンプレートはKumihan記法仕様に100%準拠
- SPEC.mdで定義された構文のみ使用
- 実験的記法・非公式記法は使用禁止

### 2. **自動検証の活用**
- 新規作成・更新時は必ず記法ツールで検証
- CI/CDパイプラインでの自動チェック
- エラーゼロでのコミット・マージを義務化

### 3. **ユーザビリティ優先**
- 初心者が理解しやすい構造
- 段階的な複雑さの提示
- 実用的なサンプル内容

---

## 🛠️ テンプレート作成ワークフロー

### Step 1: 作成前チェック
```bash
# 既存テンプレートの確認
ls 記法ツール/サンプルファイル/
ls examples/elements/

# 類似テンプレートの存在確認
grep -r "類似キーワード" 記法ツール/サンプルファイル/
```

### Step 2: テンプレート作成
- **ファイル命名**: 用途が明確な名前（例: `npc-template.txt`）
- **構造設計**: 見出し階層の論理的構成
- **内容記述**: 実用的で具体的なサンプル内容

### Step 3: 記法検証
```bash
# 検証実行
python dev/tools/syntax_fixer.py path/to/new-template.txt

# プレビュー確認
python dev/tools/syntax_fixer.py path/to/new-template.txt --preview

# 自動修正（必要時）
python dev/tools/syntax_fixer.py path/to/new-template.txt --fix
```

### Step 4: 品質チェック
- [ ] 記法エラーゼロ
- [ ] 構造の論理性
- [ ] 内容の実用性
- [ ] ドキュメント整合性

### Step 5: 統合テスト
```bash
# HTML変換テスト
python -m kumihan_formatter.cli path/to/new-template.txt -o test_output/

# 記法ツールテスト
./記法ツール/記法検証.command path/to/new-template.txt
```

---

## 🔍 品質チェックリスト

### 📝 記法準拠チェック

#### ✅ 基本構文
- [ ] ブロックマーカー: `;;;キーワード\n内容\n;;;`
- [ ] 複合マーカー: `;;;キー1+キー2;;;`（順序正確）
- [ ] Color属性: `;;;太字+ハイライト color=#xxx;;;`（最終位置）
- [ ] リスト記法: `- ` または `・` 使用

#### ✅ 構造要件
- [ ] 見出し階層の論理性（h1→h2→h3）
- [ ] 空行による段落分離
- [ ] ブロックの完全性（開始・終了マーカー対応）

#### ✅ 禁止事項確認
- [ ] Markdown記法なし（`# 見出し`、`**太字**`）
- [ ] 絵文字なし（代替表記使用）
- [ ] 目次マーカー手動記述なし

### 📊 内容品質チェック

#### ✅ 実用性
- [ ] 実際のシナリオで使用可能な内容
- [ ] 具体的で理解しやすい例示
- [ ] 適切な情報量（過不足なし）

#### ✅ 教育効果
- [ ] 段階的な学習構造
- [ ] 重要機能の適切な使用例
- [ ] よくある使用パターンの網羅

#### ✅ 保守性
- [ ] 明確なファイル名と目的
- [ ] 他テンプレートとの重複回避
- [ ] 将来の拡張性考慮

---

## 🚨 問題発生時の対応

### 記法エラー発見時
1. **即座に修正**: エラー検出後24時間以内
2. **影響範囲調査**: 他ファイルでの同様エラー確認
3. **再発防止**: チェックリスト・ツールの改善

### 品質問題発見時
1. **問題分析**: 根本原因の特定
2. **修正計画**: 段階的な改善ロードマップ
3. **検証強化**: 類似問題の予防策実装

---

## 📈 継続的改善

### 月次レビュー
- [ ] 全テンプレートファイルの一斉検証
- [ ] ユーザーフィードバックの分析
- [ ] 品質指標の測定・改善

### 四半期改善
- [ ] 新機能への対応
- [ ] テンプレート内容の最新化
- [ ] チェックツールの機能追加

### 年次見直し
- [ ] テンプレート体系の再設計
- [ ] 品質管理プロセスの最適化
- [ ] 新規テンプレートの企画・開発

---

## 🎯 品質指標

### 定量指標
- **記法エラー率**: 0% （許容値なし）
- **自動修正効率**: 95%以上
- **CI通過率**: 100%

### 定性指標
- **ユーザー理解度**: 初心者が5分以内で使用開始
- **実用性**: 実際のシナリオ作成で活用可能
- **教育効果**: 段階的な学習をサポート

記法ツールと品質管理プロセスにより、常に最高品質のテンプレートを提供します。