# 絵文字・特殊文字使用禁止ガイドライン

> **Kumihan-Formatterプロジェクトにおける絵文字使用方針**

---

## 📋 概要

Kumihan-Formatterでは、**すべての絵文字・特殊文字の使用を原則禁止**としています。これは安定性、保守性、およびクロスプラットフォーム対応の観点から決定された開発方針です。

## 🚫 使用禁止の背景

### 発生した問題（Issue #85より）
- **エンコーディング問題**: macOSでのダブルクリック実行時に絵文字が文字化け
- **環境依存**: ターミナル設定によって表示が異なる
- **保守性低下**: 文字化けがバグの根本原因となる

### 影響範囲
- CLI出力メッセージの文字化け
- ログファイルの可読性低下
- 国際化対応の阻害
- デバッグ作業の困難化

## 🎯 対象・適用範囲

### 禁止対象

#### 絵文字全般
```
🔍 📝 🎨 ⚠️ ✅ ❌ 💡 🚀 📁 🌐 🖱️ 🏗️ 📚 🔧 🐍 ⏳ 🏠 📄 🖼️ 📊
```

#### 特殊記号・装飾文字
```
★ ☆ ◆ ◇ ■ □ ● ○ ▲ △ ▼ ▽ ◀ ◁ ▶ ▷ 
※ § ¶ † ‡ • ‰ ′ ″ ‴ ‵ ‶ ‷ ‸ ‹ › « »
```

#### Unicode特殊文字
```
① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ 
⒜ ⒝ ⒞ ⒟ ⒠ ⒡ ⒢ ⒣ ⒤ ⒥
```

### 適用範囲

#### 必須適用
- **Python コード**: すべての出力メッセージ
- **シェルスクリプト**: 出力・エラーメッセージ
- **テストコード**: エラーメッセージ・ログ出力
- **技術文書**: 開発者向けドキュメント

#### 例外（限定的許可）
- **README.md**: ユーザー向け視覚効果のため許可
- **プレゼン資料**: 外部発表用資料での限定使用
- **コード内コメント**: 説明目的での最小限使用

## ✅ 推奨代替表現

### 基本的な置換ルール

| 絵文字 | 推奨代替 | 用途・説明 |
|--------|----------|------------|
| 🔍 | `[検証]` | 検証・確認処理 |
| 📝 | `[処理]` | データ処理・変換 |
| 🎨 | `[生成]` | HTML生成・レンダリング |
| ⚠️ | `[警告]` | 警告メッセージ |
| ✅ | `[完了]` | 成功・完了状態 |
| ❌ | `[エラー]` | エラー・失敗状態 |
| 💡 | `[ヒント]` | ヒント・補足情報 |
| 🚀 | `[開始]` | 処理開始・実行 |
| 📁 | `[フォルダ]` | ディレクトリ・フォルダ |
| 🌐 | `[ブラウザ]` | ブラウザ・Web関連 |
| 📄 | `[ファイル]` | ファイル操作 |
| 🖼️ | `[画像]` | 画像・グラフィック |
| 📊 | `[統計]` | 統計・データ |
| 🔧 | `[設定]` | 設定・構成 |
| 🐍 | `[Python]` | Python関連 |

### 色付きタグ（Rich library使用時）

```python
# 良い例: 色付きタグを使用
console.print("[green][完了][/green] ファイル変換が正常に完了しました")
console.print("[yellow][警告][/yellow] 設定ファイルが見つかりません")
console.print("[red][エラー][/red] ファイルの読み込みに失敗しました")

# 悪い例: 絵文字を使用
console.print("[green]✅[/green] ファイル変換が正常に完了しました")  # 禁止
console.print("[yellow]⚠️[/yellow] 設定ファイルが見つかりません")   # 禁止
console.print("[red]❌[/red] ファイルの読み込みに失敗しました")     # 禁止
```

### プレーンテキスト出力

```bash
# 良い例: シェルスクリプトでの代替表現
echo "[完了] セットアップが正常に完了しました"
echo "[警告] Python 3.9以上が必要です"
echo "[エラー] ファイルが見つかりません"

# 悪い例: 絵文字を使用
echo "✅ セットアップが正常に完了しました"  # 禁止
echo "⚠️ Python 3.9以上が必要です"      # 禁止
echo "❌ ファイルが見つかりません"        # 禁止
```

## 🔧 実装ガイドライン

### 新規開発時の注意点

1. **出力メッセージ設計**
   - タグ形式で一貫性を保つ
   - 色付けはRich libraryのマークアップを活用
   - 国際化を考慮した表現を選択

2. **ログ出力**
   - 構造化ログを優先
   - レベル別のプレフィックスを使用
   - 絵文字に依存しない視認性を確保

3. **エラーメッセージ**
   - 明確で検索可能な文言
   - エラーコードの併用を推奨
   - 解決策の併記

### 既存コードの修正指針

```python
# Before (修正前)
print("🔍 ファイルを検索中...")
print("✅ 変換完了!")
print("❌ エラーが発生しました")

# After (修正後)
print("[検証] ファイルを検索中...")
print("[完了] 変換完了!")
print("[エラー] エラーが発生しました")
```

## 🛠️ 検証・保守

### 自動チェック

将来的に以下のツールで自動検証を実装予定：

```bash
# 絵文字使用チェック
python dev/tools/emoji_checker.py --check-all

# CI/CDでの自動実行
# GitHub Actionsワークフローに統合予定
```

### 手動チェック項目

- [ ] CLI出力に絵文字が含まれていない
- [ ] シェルスクリプトの出力が適切
- [ ] エラーメッセージが検索可能
- [ ] 国際化対応に問題がない

## 📚 参考情報

### 関連Issue・PR
- **Issue #85**: HTMLソースボタン実装後の重大な表示問題
- **Issue #86**: 開発方針: 絵文字・特殊文字の使用禁止ガイドライン策定
- **Commit 31d186f**: 絵文字除去の応急処置

### 外部参考資料
- [Unicode Emoji Standard](https://unicode.org/emoji/)
- [Rich Library Documentation](https://rich.readthedocs.io/)
- [Terminal Color Codes](https://en.wikipedia.org/wiki/ANSI_escape_code)

---

## 🔄 更新履歴

- **2025-06-24**: 初版作成（Issue #85対応）
- 今後の更新履歴はここに追記

---

**重要**: この方針は**すべての開発者が遵守すべき必須ガイドライン**です。新規プルリクエスト時は必ずこの方針に従ってください。