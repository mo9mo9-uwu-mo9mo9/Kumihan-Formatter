# ❓ よくある質問（FAQ）

> **困ったときはここをチェック！** カテゴリ別解決法

## 🔍 カテゴリ別索引

1. [セットアップ関連](#-セットアップ関連)
2. [基本的な使い方](#-基本的な使い方) 
3. [記法・構文エラー](#-記法構文エラー)
4. [出力・表示関連](#-出力表示関連)
5. [配布・共有](#-配布共有)
6. [上級者向け](#-上級者向け)

---

## 🔧 セットアップ関連

### Q1: Pythonってなんですか？安全ですか？

**A:** Pythonは世界中で使われているプログラミング言語で、安全です。

- **安全性**: Google、Netflix、Instagramなど大企業も使用
- **必要性**: Kumihan-Formatterの動作に必要
- **影響**: 他のソフトウェアには一切影響しません

**インストール方法**:
1. [Python公式サイト](https://www.python.org/downloads/) にアクセス
2. 「Download Python 3.x.x」をクリック
3. インストール時に **「Add Python to PATH」にチェック** を入れる

---

### Q2: セットアップに失敗しました

**A:** 以下の順番で確認してください：

#### Windows の場合
```bash
# 1. Pythonが正しくインストールされているか確認
python --version

# 2. pipが使えるか確認  
pip --version

# 3. 管理者権限で実行してみる
# セットアップ_Windows.batを右クリック → 「管理者として実行」
```

#### macOS の場合
```bash
# 1. Pythonが正しくインストールされているか確認
python3 --version

# 2. XCodeコマンドラインツールのインストール
xcode-select --install
```

**よくある原因**:
- Python未インストール → 上記のリンクからインストール
- PATHが通っていない → 再インストール時に「Add to PATH」をチェック
- 古いPythonバージョン → 3.9以上が必要

---

### Q3: ウイルス対策ソフトが反応します

**A:** これは「誤検知」です。安全に無視できます。

**対処法**:
1. **一時的な除外設定**
   - ウイルス対策ソフトの設定を開く
   - Kumihan-Formatterフォルダを除外リストに追加

2. **信頼できる理由**
   - オープンソース（コードが公開されている）
   - GitHubで開発・配布（信頼性の高いプラットフォーム）
   - マルウェアスキャン済み

---

## 💻 基本的な使い方

### Q4: テキストファイルをどうやって作ればいいですか？

**A:** 以下のいずれかを使用してください：

**推奨エディタ**:
- **Windows**: メモ帳、Notepad++
- **macOS**: テキストエディット、CotEditor
- **クロスプラットフォーム**: Visual Studio Code

**保存時の注意**:
- **文字コード**: UTF-8を選択
- **ファイル拡張子**: .txt
- **改行コード**: 自動（気にしなくてOK）

---

### Q5: 変換したのに何も起こりません

**A:** チェックリストで確認してください：

- [ ] エラーメッセージが表示されていませんか？
- [ ] ファイルの拡張子は.txtですか？
- [ ] Kumihan記法で書かれていますか？
- [ ] ファイルが空ではないですか？

**確認方法**:
```bash
# コマンドラインで詳細を確認
kumihan your_file.txt --debug
```

---

### Q6: ブラウザが自動で開きません

**A:** 以下を試してください：

1. **手動でHTMLファイルを開く**
   - `dist/` フォルダを確認
   - .htmlファイルをダブルクリック

2. **自動プレビューを無効にして実行**
   ```bash
   kumihan your_file.txt --no-preview
   ```

3. **ブラウザの設定確認**
   - デフォルトブラウザが設定されているか確認

---

## 📝 記法・構文エラー

### Q7: エラーが出て変換できません

**A:** エラーメッセージを確認して対処してください：

#### よくあるエラーと対処法

**`[ERROR:unclosed-block]`**
```
;;;太字
内容
# ← ここに「;;;」が抜けている
```
**解決法**: 閉じマーカー `;;;` を追加

**`[ERROR:invalid-keyword]`**
```
;;;太字体  # ← 正しくは「太字」
内容
;;;
```
**解決法**: 正しいキーワードを使用（[記法リファレンス](SYNTAX_REFERENCE.md)参照）

**`[ERROR:empty-block]`**
```
;;;太字
# ← 内容が空
;;;
```
**解決法**: ブロック内に内容を記述

---

### Q8: 改行が反映されません

**A:** 改行の種類を理解してください：

#### 段落の区切り（推奨）
```
最初の段落です。

空行を入れると新しい段落になります。
```

#### 段落内の改行
```
住所：
東京都〇〇区△△1-2-3
山田ビル4F
```

**よくある間違い**:
```
文章1;;;改行;;;文章2  # ← これは間違い
```

**正しい書き方**:
```
文章1

文章2
```

---

### Q9: 複合記法がうまくいきません

**A:** 複合記法のルールを確認してください：

#### 正しい書き方
```
;;;太字+枠線;;;  # ← 「+」で連結
;;;見出し2+ハイライト color=#ff0000;;;  # ← color指定は最後
```

#### 間違った書き方
```
;;;太字 枠線;;;              # ← スペース区切りは無効
;;;ハイライト color=#ff0000+太字;;;  # ← color指定の位置が間違い
```

---

## 🖥️ 出力・表示関連

### Q10: 文字化けしてしまいます

**A:** 文字エンコーディングを確認してください：

#### Windows（メモ帳）の場合
1. ファイル → 名前を付けて保存
2. エンコード → **「UTF-8」** を選択
3. 保存

#### macOS（テキストエディット）の場合
1. フォーマット → **「標準テキストにする」**
2. ファイル → 保存
3. エンコーディング → **「Unicode（UTF-8）」** を選択

---

### Q11: CSSをカスタマイズしたいです

**A:** config.yamlファイルでカスタマイズできます：

```yaml
# config.yaml
styles:
  body_font: "Helvetica, Arial, sans-serif"
  heading_color: "#2c3e50"
  background_color: "#ffffff"
  
custom_css: |
  .box {
    border: 2px solid #3498db;
    border-radius: 5px;
  }
```

詳しくは [設定ガイド](CONFIG_GUIDE.md) を参照してください。

---

### Q12: 画像が表示されません

**A:** 画像ファイルの配置を確認してください：

#### 正しいフォルダ構造
```
your_project/
├── your_file.txt
├── images/           ← 画像専用フォルダ
│   ├── image1.jpg
│   └── image2.png
└── dist/             ← 出力先
    └── your_file.html
```

#### Kumihan記法での指定
```
;;;画像 alt=説明文
image1.jpg           ← images/フォルダからの相対パス
;;;
```

---

## 📦 配布・共有

### Q13: 複数ファイルを一括変換したいです

**A:** 以下の方法があります：

#### 方法1: コマンドラインでワイルドカード使用
```bash
kumihan *.txt  # 現在のフォルダのすべての.txtファイル
```

#### 方法2: バッチファイル作成（Windows）
```batch
@echo off
for %%f in (*.txt) do (
    kumihan "%%f"
)
```

#### 方法3: 設定ファイルで一括指定
```yaml
# config.yaml
input_files:
  - chapter1.txt
  - chapter2.txt  
  - chapter3.txt
```

---

### Q14: ZIPファイルで配布したいです

**A:** `zip-dist` コマンドを使用してください：

```bash
# 配布用ZIPを作成
python -m kumihan_formatter.cli zip-dist . -o distribution

# 生成されるファイル
distribution/
└── Kumihan-Formatter-v0.3.0.zip  # 配布可能なZIPファイル
```

---

### Q15: Boothで販売する際の注意点は？

**A:** 以下の点にご注意ください：

#### ファイル形式
- **HTML形式**: そのまま販売OK
- **PDF化**: 印刷用途なら推奨
- **ZIP圧縮**: ファイルサイズ削減

#### 著作権・ライセンス
- **Kumihan-Formatter**: 改変自由、再配布禁止
- **あなたの作品**: 自由に販売・配布可能
- **使用素材**: ライセンス確認必須

#### 推奨事項
- サンプル版（無料）の提供
- 推奨動作環境の明記
- 問い合わせ先の記載

---

## 🎓 上級者向け

### Q16: プラグインや拡張はありますか？

**A:** 現在は基本機能のみですが、将来実装予定です：

#### v1.0で実装予定
- テーマシステム
- カスタムブロック定義
- 外部ツール連携

#### 現在可能なカスタマイズ
- CSS/HTML テンプレート変更
- YAML設定ファイル
- 後処理スクリプト連携

---

### Q17: APIとして使いたいです

**A:** Pythonモジュールとして利用可能です：

```python
from kumihan_formatter import parse, render

# テキストを解析
ast = parse(text_content)

# HTMLに変換
html_output = render(ast, config)

print(html_output)
```

詳しくは [開発者ドキュメント](../dev/ARCHITECTURE.md) を参照してください。

---

### Q18: 他の形式（PDF、EPUB）に出力したいです

**A:** 現在はHTML出力のみですが、変換ツールとの組み合わせで可能です：

#### PDF変換
```bash
# 1. HTMLを生成
kumihan input.txt

# 2. PDFに変換（wkhtmltopdf使用）
wkhtmltopdf dist/input.html output.pdf
```

#### EPUB変換
```bash
# pandocを使用
pandoc dist/input.html -o output.epub
```

---

## 🆘 それでも解決しない場合

### サポート窓口

1. **GitHub Issues**: [問題を報告](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/issues)
2. **メール**: 緊急の場合のみ
3. **Twitter**: @YourTwitterHandle (DM開放中)

### 報告時に含めるべき情報

- **OS**: Windows 10、macOS Big Sur など
- **Pythonバージョン**: `python --version` の出力
- **エラーメッセージ**: 完全なエラー文
- **入力ファイル**: 問題のあるテキストファイル（可能な範囲で）
- **期待する動作**: どうなってほしいか

---

**解決できましたか？他に質問があれば、お気軽にお聞かせください！ 🤝**