# 改行処理ガイド

> **「改行したら、そのまま改行される」** - それがKumihan-Formatterの改行処理です。

## ✨ 特長：直感的な改行処理

### 📝 基本ルール

| 入力 | 出力 | 説明 |
|------|------|------|
| 1行のテキスト | そのまま1行 | **直感的** |
| 改行 | `<br>`タグ | **期待通り** |
| 空行 | 段落区切り (`<p>`) | **自然** |

### 🆚 他のツールとの比較

| ツール | 改行方法 | 学習コスト | 直感性 |
|--------|----------|------------|--------|
| **Kumihan-Formatter** | そのまま改行 | **なし** | ⭐⭐⭐⭐⭐ |
| Markdown | 2スペース+改行 | あり | ⭐⭐ |
| HTML | `<br>`タグ手動入力 | あり | ⭐ |

### 💡 なぜこの方式？

**問題意識**: 多くのテキスト変換ツールは、ユーザーの期待と実際の動作が異なります。

**解決策**: Kumihan-Formatterは「改行したら改行される」という自然な期待に完全対応しました。

---

## 📖 使用例

### ✅ 基本的な使い方

**入力:**
```
これは1行目です。
これは2行目です。
これは3行目です。

新しい段落の開始です。
段落内の2行目です。
```

**出力:**
```html
<p>これは1行目です。<br>これは2行目です。<br>これは3行目です。</p>
<p>新しい段落の開始です。<br>段落内の2行目です。</p>
```

**表示結果:**
```
これは1行目です。
これは2行目です。
これは3行目です。

新しい段落の開始です。
段落内の2行目です。
```

### ✅ ブロック記法との組み合わせ

**入力:**
```
;;;太字
重要な情報の1行目
重要な情報の2行目
;;;

通常の段落です。
2行目も通常の段落です。
```

**出力:**
```html
<strong>重要な情報の1行目<br>重要な情報の2行目</strong>
<p>通常の段落です。<br>2行目も通常の段落です。</p>
```

---

## ⚠️ トラブルシューティング

### 🚨 よくある問題

#### 問題1: 改行が表示されない

**症状:** 改行したのに、改行として表示されない

**原因と解決策:**

| 原因 | 確認方法 | 解決策 |
|------|----------|--------|
| **空行に見えない文字** | 空行にカーソルを置く | 完全に何も入力しない空行を作る |
| **特殊文字で開始** | 行頭文字を確認 | 下記の「特殊文字の回避」参照 |
| **改行文字の混在** | エディタ設定確認 | LF改行、UTF-8に統一 |

#### 問題2: 意図しない特殊処理

**症状:** 普通のテキストのつもりが、リストやコメントになる

**原因:** 行頭の特殊文字

| 行頭文字 | 処理 | 回避策 |
|----------|------|--------|
| `#` | コメント（無視） | `＃`（全角）を使用 |
| `- ` | リスト | `－`（全角）または`—`を使用 |
| `1. ` | 番号付きリスト | `１.`（全角）または`1`のみ |
| `;;;` | ブロック記法 | `###;;;`でエスケープ |

### 🔧 診断フロー

改行が期待通りにならない場合：

```
1. 空行は完全に空？
   NO → スペース・タブを削除
   ↓ YES

2. 行頭に特殊文字（#, -, 数字+.）？
   YES → 全角文字に変更
   ↓ NO

3. ブロック記法の直後？
   YES → 空行を追加
   ↓ NO

4. エディタの改行設定は適切？
   NO → LF改行、UTF-8に設定
   ↓ YES

5. まだ解決しない場合
   → Issue報告をお願いします
```

---

## 💡 応用テクニック

### 📋 推奨される書き方

**✅ 良い例:**
```
シナリオのタイトル
作者：○○

概要説明の1行目
概要説明の2行目

;;;見出し2
詳細説明
;;;

詳細の補足事項
追加の説明
```

**❌ 注意が必要な例:**
```
# これはコメントになります
- これはリストになります  
1. これは番号付きリストになります

    （空行にスペースが入っている）
```

### 🎯 特殊なケースの対処

#### 字下げしたい場合
```
通常のテキスト

;;;枠線
字下げしたような見た目のテキスト
2行目も同様に表示されます
;;;
```

#### 長い文章での読みやすさ向上
```
長い文章の場合は、適度な位置で改行することで
読みやすさを向上させることができます。
HTMLでは自動的に<br>タグが挿入されます。

新しい話題では空行で段落を区切ります。
```

---

## 🎉 まとめ

Kumihan-Formatterの改行処理は：

- ✅ **学習不要** - 期待通りに動作
- ✅ **直感的** - 改行したら改行される
- ✅ **柔軟** - ブロック記法との組み合わせも自由
- ✅ **安定** - 予測可能な動作

**この改行処理により、執筆に集中でき、技術的な制約に悩まされることがありません。**

---

*何か問題がありましたら、[GitHub Issues](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/issues) までお気軽にご報告ください。*