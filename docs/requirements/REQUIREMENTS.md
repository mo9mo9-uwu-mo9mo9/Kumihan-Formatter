# 要件定義書 - Kumihan-Formatter

## 1. プロジェクト概要

### 1.1 プロジェクト名
Kumihan-Formatter（組版フォーマッター）

### 1.2 バージョン
- 要件定義書バージョン: 1.0.0
- 作成日: 2025-01-29
- 最終更新日: 2025-01-29

### 1.3 プロジェクトの目的
非技術者でも組版の作業を簡単かつ美しく行えるアプリケーションを提供する。MarkdownやHTML、CSSをまったく知らない人間でも、美しい組版を簡単に作れるようにする。

### 1.4 背景と課題
- **背景**: TRPGのゲームシナリオ制作者は、作成したシナリオを他のプレイヤーに配布する際、見やすく美しい形式に整える必要がある
- **課題**: 
  - 既存の組版ツールは技術的知識を要求される（HTML/CSS/Markdown等）
  - 非技術者にとって学習コストが高い
  - 手作業での整形は時間がかかり、品質にばらつきが生じる

## 2. 対象ユーザー

### 2.1 主要ターゲット
- **一般ユーザー（非技術者）**
  - TRPGシナリオ作成者
  - 技術的知識を持たない文書作成者
  - 美しい文書レイアウトを必要とする人

### 2.2 ユーザー特性
- プログラミング知識: なし
- HTML/CSS知識: なし
- Markdown知識: なし
- 期待値: 直感的な操作で美しい文書を作成したい

## 3. システムスコープ

### 3.1 スコープ内
- 独自記法を用いた文書の作成
- TRPGシナリオに適した組版機能
- 配布用フォーマット（HTML/PDF等）への変換
- シンプルで直感的なインターフェース
- 美しいデフォルトスタイル

### 3.2 スコープ外
- リアルタイムコラボレーション機能
- クラウドストレージ機能
- 複雑な数式組版
- プログラムコードのシンタックスハイライト

## 4. 機能要件

### 4.1 コア機能

#### 4.1.1 文書変換機能
- **要件ID**: FR-001
- **優先度**: 必須
- **説明**: 独自記法で書かれたテキストファイルを、配布用フォーマットに変換する
- **入力**: 独自記法テキストファイル（.txt）
- **出力**: HTML/PDF等の配布用フォーマット

#### 4.1.2 独自記法のサポート
- **要件ID**: FR-002
- **優先度**: 必須
- **説明**: 非技術者でも理解しやすい独自の記法をサポート
- **主要記法**:
  - 装飾記法: `#装飾名# 内容 ;;;`
  - 脚注記法: `((内容))`
  - ルビ記法: `｜内容《読み》`
  - リスト記法: `-`、`・`、`1.` で始まる行
  - 複合記法: `+` または `＋` で複数スタイルを組み合わせ

#### 4.1.3 美しいデフォルトスタイル
- **要件ID**: FR-003
- **優先度**: 必須
- **説明**: 設定なしで美しい組版結果を生成
- **要素**:
  - 適切な余白設定
  - 読みやすいフォント選択
  - TRPGシナリオに適したレイアウト

### 4.2 追加機能（今後の検討事項）
- テンプレート機能
- カスタムスタイル設定
- プレビュー機能
- バッチ処理機能

## 5. 非機能要件

### 5.1 使いやすさ
- **要件ID**: NFR-001
- **説明**: 技術知識のないユーザーでも直感的に使用できる
- **基準**: 
  - 初回使用時に説明書なしで基本操作ができる
  - エラーメッセージが分かりやすい日本語で表示される

### 5.2 パフォーマンス
- **要件ID**: NFR-002
- **説明**: 一般的なTRPGシナリオ（50ページ程度）を高速に処理
- **基準**: 50ページの文書を10秒以内に変換完了

### 5.3 互換性
- **要件ID**: NFR-003
- **説明**: 主要なOSで動作する
- **対応OS**: 
  - Windows 10以降
  - macOS 12以降
  - Linux（Ubuntu 20.04以降）

### 5.4 保守性
- **要件ID**: NFR-004
- **説明**: コードベースが保守しやすい構造
- **基準**:
  - モジュール化された設計
  - 適切なドキュメント
  - テストカバレッジ80%以上

## 6. 制約事項

### 6.1 技術的制約
- Python 3.12以上を使用
- 外部依存を最小限に抑える
- オフライン環境でも動作する

### 6.2 ライセンス
- オープンソースライセンス（具体的なライセンスは要検討）

## 7. 前提条件
- ユーザーはテキストエディタで文書を作成できる
- ユーザーはコマンドラインまたはGUIアプリケーションを実行できる
- 出力ファイルを表示するためのブラウザまたはPDFビューアがインストールされている

## 8. リスクと対策

### 8.1 技術的リスク
- **リスク**: 独自記法が複雑になりすぎる
- **対策**: ユーザビリティテストを定期的に実施

### 8.2 採用リスク
- **リスク**: 既存のMarkdown等に慣れたユーザーの抵抗
- **対策**: Markdown風の記法も部分的にサポート

## 9. 成功基準
- 非技術者が30分以内に基本的な文書を作成できる
- 出力される文書が商用レベルの品質を持つ
- ユーザーからの肯定的なフィードバックが80%以上

## 10. 改訂履歴

| バージョン | 日付 | 変更内容 | 作成者 |
|------------|------|----------|--------|
| 1.0.0 | 2025-01-29 | 初版作成 | Claude Code |