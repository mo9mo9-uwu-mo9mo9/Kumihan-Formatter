# MVPスコープ定義書 - Kumihan-Formatter

## 1. 概要

このドキュメントは、Kumihan-Formatter v0.9.0（MVP版）に含める機能のスコープを定義します。開発リソースと優先度を考慮し、最小限の機能セットで最大の価値を提供することを目的とします。

## 2. MVPの目的

### 2.1 ビジネス目標
- TRPGシナリオ作成者が基本的な組版作業を行えるツールの提供
- 非技術者でも使える最小限の機能セットの実現
- 早期リリースによるユーザーフィードバックの収集

### 2.2 成功基準
- 基本的なシナリオ文書を作成・変換できる
- インストールから変換まで30分以内に完了できる
- 致命的なバグがない安定した動作

## 3. 機能スコープ

### 3.1 コア機能（MVP必須）

#### 3.1.1 基本記法サポート
**実装する記法**:
- `#太字#\n内容\n##` - テキストの強調
- `#見出し1#\n内容\n##` ～ `#見出し5#\n内容\n##` - 文書構造化
- `#枠線#\n内容\n##` - 重要情報の囲み
- `#ハイライト#\n内容\n##` - マーカー強調
- `#イタリック#\n内容\n##` - 斜体表現
- `#下線#\n内容\n##` - アンダーライン
- `#取り消し線#\n内容\n##` - 訂正表現
- `#目次#\n##` - 自動目次生成（空ブロック許可）

**注記**: v3.0.0仕様により、全記法がブロック形式で終了マーカー`##`必須。単一行記法は完全廃止。

**受け入れ条件**:
- 各記法が正しくHTMLに変換される
- ブロック形式（複数行）対応
- エラー時の分かりやすいメッセージ

#### 3.1.2 CLI基本機能
**実装するコマンド**:
```bash
# 基本変換
kumihan convert input.txt -o output/

# 構文チェック
kumihan check-syntax input.txt

# ヘルプ表示
kumihan --help
```

**受け入れ条件**:
- 単一ファイル変換が正常動作
- エラー時の適切な終了コード
- 分かりやすい日本語メッセージ

#### 3.1.3 HTML出力
**基本仕様**:
- UTF-8エンコーディング
- インラインCSS埋め込み
- レスポンシブ対応
- 印刷最適化CSS

**受け入れ条件**:
- ブラウザで正常表示（Chrome/Firefox/Safari）
- A4印刷時の適切なレイアウト
- モバイル端末での読みやすさ

#### 3.1.4 エラーハンドリング
**基本エラー処理**:
- ファイル読み込みエラー
- 記法構文エラー
- 出力先書き込みエラー

**受け入れ条件**:
- エラー箇所の行番号表示
- 修正方法の提案
- 処理継続可能なエラーの警告表示

### 3.2 MVP対象外機能（将来実装）

#### 3.2.1 高度な記法
- **複合記法**: `#太字+枠線#` （組み合わせ）
- **属性付き記法**: `#ハイライト color=#ffe6e6#`
- **特殊記法**: 脚注 `((content))`、ルビ `#ルビ content(reading)#`
- **インタラクティブ記法**: `#折りたたみ#`、`#ネタバレ#`

#### 3.2.2 高度な機能
- **GUI機能**: グラフィカルインターフェース
- **テンプレートシステム**: カスタムテンプレート
- **バッチ処理**: 複数ファイル一括変換
- **ファイル監視モード**: 自動再変換
- **プレビュー機能**: リアルタイムプレビュー

#### 3.2.3 出力形式
- **PDF出力**: 直接PDF生成
- **Markdown出力**: 相互変換
- **EPUB出力**: 電子書籍形式

### 3.3 v2.0以降の機能
- **プラグインシステム**: 拡張機能対応
- **テーマ機能**: デザインテーマ切り替え
- **コラボレーション**: 共同編集機能
- **クラウド連携**: オンラインストレージ対応

## 4. 技術的制約

### 4.1 MVP技術スタック
- **言語**: Python 3.12+
- **必須依存**: 最小限に抑える（Jinja2のみ）
- **開発ツール**: Black, isort, mypy, pytest

### 4.2 パフォーマンス目標
- **変換速度**: 10ページ/秒以上
- **メモリ使用**: 100MB以下
- **起動時間**: 1秒以内

## 5. 品質基準

### 5.1 テストカバレッジ
- **単体テスト**: 80%以上
- **統合テスト**: 主要シナリオ網羅
- **手動テスト**: インストール～変換の一連フロー

### 5.2 ドキュメント
- **README.md**: インストールと基本使用法
- **エラーメッセージ**: 全て日本語化
- **サンプルファイル**: 3種類以上

## 6. リリース計画

### 6.1 開発フェーズ
```
Phase 1（2週間）: 基本記法パーサー実装
Phase 2（1週間）: CLI実装
Phase 3（1週間）: HTML生成・テンプレート
Phase 4（1週間）: テスト・ドキュメント作成
```

### 6.2 マイルストーン
- **Week 1-2**: パーサー完成、基本記法動作確認
- **Week 3**: CLI完成、変換機能統合
- **Week 4**: HTML出力完成、デザイン調整
- **Week 5**: バグ修正、ドキュメント完成、v0.9.0リリース

## 7. リスクと対策

### 7.1 技術的リスク
- **リスク**: パーサーの複雑化
- **対策**: 基本記法のみに限定、段階的拡張

### 7.2 スケジュールリスク
- **リスク**: 5週間での完成困難
- **対策**: 機能の更なる絞り込み、v0.9.1での追加実装

## 8. 成功指標

### 8.1 定量的指標
- インストール成功率: 95%以上
- 基本変換成功率: 99%以上
- ユーザー満足度: 80%以上

### 8.2 定性的指標
- 「簡単に使えた」というフィードバック
- 「期待通りの出力が得られた」という評価
- 継続利用の意向確認

---

**作成日**: 2025-08-03  
**作成者**: Claude Code  
**承認者**: （承認待ち）