# Kumihan-Formatter

CoC6th同人シナリオなどのテキストファイルを、**ワンコマンドで美しいHTML**に変換する日本語ツールです。

![バージョン](https://img.shields.io/badge/version-0.3.0-blue.svg)
![Python](https://img.shields.io/badge/python-3.9+-green.svg)
![プラットフォーム](https://img.shields.io/badge/platform-Windows%20%7C%20macOS-lightgrey.svg)
![テスト](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/actions/workflows/test.yml/badge.svg)

## ✨ 特長

### 🎯 直感的な改行処理
**「改行したら、そのまま改行される」** - 他のツールでは複雑な操作が必要な改行処理が、期待通りに動作します。

| 他のツール | Kumihan-Formatter |
|-----------|-------------------|
| 2スペース+改行（Markdown） | **そのまま改行** |
| `<br>`タグ手動入力（HTML） | **自動で`<br>`挿入** |
| 学習コストあり | **学習コスト不要** |

[→ 改行処理について詳しく](docs/user/LINE_BREAK_GUIDE.md)

### 🎨 プロ品質の出力
- **美しい組版**: 適切なフォント・行間・レイアウト
- **印刷対応**: A4サイズで美しく印刷可能  
- **配布可能**: HTMLファイル単体で完結

## 🔧 事前準備（初回のみ・5分程度）

このツールを使うには、**Python**というプログラムが必要です。  
多くのPCには最初から入っていませんが、簡単にインストールできます。

### Pythonって何？
Pythonは、このツールを動かすためのエンジンのようなものです。  
**無料**で、**安全**で、世界中で使われている標準的なソフトウェアです。  
**プログラミング知識は一切不要**です。

### Pythonのインストール手順

**Windows**
1. https://python.org にアクセス
2. 「Download Python 3.x.x」の黄色いボタンをクリック
3. ダウンロードしたファイルを実行
4. ⚠️ **重要**: 「Add Python to PATH」にチェックを入れる
5. 「Install Now」をクリック

**macOS**
1. https://python.org にアクセス  
2. 「Download Python 3.x.x」の黄色いボタンをクリック
3. ダウンロードしたファイルを実行
4. 画面の指示に従ってインストール

## 🚀 3ステップで始める

### ステップ1: ダウンロード
1. このページの上部にある緑色の「Code」ボタンをクリック → 「Download ZIP」を選択
2. ダウンロードしたzipファイルを解凍してフォルダを開く

### ステップ2: 初回セットアップ
**Windows**
- `WINDOWS/` フォルダ内の `初回セットアップ.bat` をダブルクリック

**macOS**  
- `MAC/` フォルダ内の `初回セットアップ.command` をダブルクリック

*自動で必要な環境がセットアップされます（数分かかります）*  
*Pythonが正しくインストールされているかも自動でチェックされます*

### ステップ3: 変換開始
**Windows**
- `WINDOWS/` フォルダ内の `変換ツール.bat` をダブルクリック

**macOS**
- `MAC/` フォルダ内の `変換ツール.command` をダブルクリック

**.txtファイル**をドラッグ&ドロップするだけで変換完了！

## 💡 こんな方におすすめ

- **CoC6thシナリオ**を美しく配布したい同人作家の方
- **HTMLの知識はない**けれど、きれいな文書を作りたい方  
- **Word等の組版ソフトを使わず**に、テキストファイルから直接変換したい方
- **即売会やBooth**で配布可能な形式がほしい方

## ✨ 何ができるの？

### 入力（.txtファイル）
```
;;;見出し1
クトゥルフ神話TRPG シナリオサンプル
;;;

このシナリオは、フォーマッターのテスト用サンプルです。

;;;見出し2
シナリオ概要
;;;

;;;太字
探索者たちは、とある不可解な事件の調査を依頼されます。
;;;

- 推奨人数: 2〜4人
- プレイ時間: 3〜4時間
- 推奨技能: 図書館、目星、心理学

;;;枠線
舞台は1920年代のアメリカ、マサチューセッツ州アーカム。
霧深い港町で、奇妙な失踪事件が相次いでいる。
;;;
```

### 出力（美しいHTML）
- **プロ品質の組版**：きれいなフォント、適切な行間、美しいレイアウト
- **印刷対応**：A4サイズで美しく印刷可能
- **配布可能**：HTMLファイル単体で完結、どこでも表示可能

## 🔧 基本的なKumihan記法

| Kumihan記法 | 効果 |
|------|------|
| `;;;太字\n内容\n;;;` | **太字で強調** |
| `;;;枠線\n内容\n;;;` | 枠線で囲んで強調 |
| `;;;見出し1\nタイトル\n;;;` | 大見出し |
| `;;;見出し2\nサブタイトル\n;;;` | 中見出し |
| `- 項目` | 箇条書きリスト |
| `;;;image.png;;;` | 画像埋め込み（imagesフォルダ内） |

**💡 ヒント**: 複合記法も使えます（例: `;;;太字+枠線\n内容\n;;;`）

[→ 詳しいKumihan記法を見る](docs/SYNTAX_REFERENCE.md)

## 🎯 サンプルを試してみる

**Windows**
- `WINDOWS/` フォルダ内の `サンプル実行.bat` をダブルクリック

**macOS**
- `MAC/` フォルダ内の `サンプル実行.command` をダブルクリック

サンプルファイルが変換され、`dist/samples/` フォルダに結果が保存されます。

### ✨ 主な機能
- **目次自動生成**: 見出しが2つ以上あると自動で目次が生成されます
- **ソーストグル表示**: Kumihan記法と結果を切り替え表示（`--with-source-toggle`オプション）
- **上書き保護**: 既存ファイルの上書き前に確認
- **エラー表示改善**: 学習用サンプルのエラーを「想定されたエラー」として明示
- **ライブプレビュー**: 変更を即座に確認（開発者向け）
- **テーマ・設定**: JSON/YAMLでカスタマイズ可能（上級者向け）

## 🛠️ うまくいかない時は

よくある問題と解決策：

### 🔍 インストール確認方法
以下のいずれかの方法で、Pythonが正しくインストールされているか確認できます：
- **おすすめ**: `初回セットアップ.bat` (Windows) / `初回セットアップ.command` (macOS) を実行すると自動確認されます
- **手動確認**: コマンドプロンプト/ターミナルで `python --version` と入力

### ❌ Python が見つからないエラー
```
💡 Pythonのインストールが必要です
```
**解決方法**:
1. 上記の「Pythonのインストール手順」に従ってPythonをインストール
2. Windowsの場合は「Add Python to PATH」のチェックを忘れずに
3. インストール後、PCを再起動してから再実行

### ❌ 仮想環境エラー
```  
💡 もう一度セットアップを実行してください
```
**解決方法**:
- `初回セットアップ.bat` (Windows) または `初回セットアップ.command` (macOS) をもう一度ダブルクリック
- エラーメッセージが表示される場合は、PCを再起動してから再実行

### ❌ 変換がうまくいかない
```
💡 ファイル形式・名前を確認してください
```
**解決方法**:
- `.txt` ファイルのみ対応しています
- ファイル名に特殊文字（&、%、#など）が含まれていませんか？
- ファイルサイズが極端に大きくありませんか？

### 💬 それでも解決しない場合
- [GitHub Issues](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/issues) でお気軽にご質問ください
- エラーメッセージの内容を教えていただけると解決が早くなります

[→ 詳しいトラブルシューティング](docs/user/TROUBLESHOOTING.md)

## 📖 もっと詳しく

### 📚 基本レベル
- **[QUICKSTART.md](docs/QUICKSTART.md)** - はじめての方向け詳細ガイド
- **[examples/](examples/)** - サンプルファイル集

### 📖 応用レベル  
- **[USER_GUIDE.md](docs/USER_GUIDE.md)** - 全機能の使い方
- **[SYNTAX_REFERENCE.md](docs/SYNTAX_REFERENCE.md)** - 完全Kumihan記法リファレンス

### ⚙️ 上級者向け
- **[ADVANCED.md](docs/ADVANCED.md)** - カスタマイズ・設定ファイル（JSON/YAML）

## 🤝 フィードバック・お問い合わせ

- **バグ報告・機能要望**: [GitHub Issues](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/issues)
- **使い方がわからない**: [Discussions](https://github.com/mo9mo9-uwu-mo9mo9/Kumihan-Formatter/discussions)

## 📄 ライセンス

MIT License - 自由に改変・利用可能です（再配布は禁止）

---

**Kumihan-Formatter** - 美しい組版を、誰でも簡単に。 ✨