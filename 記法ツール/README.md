# 記法ツール

Kumihan-Formatterの記法関連ツールとサンプルファイルをまとめた開発効率化フォルダです。

## 📁 構成

```
記法ツール/
├── README.md                    # このファイル
├── 記法検証.command             # D&D: 記法エラーのチェック
├── 記法プレビュー.command       # D&D: 修正内容のプレビュー
├── 記法修正.command             # D&D: 自動修正の実行
└── サンプルファイル/
    ├── 基本記法サンプル.txt     # 基本的なKumihan記法の例
    ├── 記法エラーサンプル.txt   # 修正テスト用のエラーサンプル
    ├── 01-quickstart.txt        # クイックスタートサンプル
    ├── 02-basic.txt             # 基本サンプル
    ├── 03-comprehensive.txt     # 包括的サンプル
    ├── item-template.txt        # アイテムテンプレート
    ├── npc-template.txt         # NPCテンプレート
    └── skill-template.txt       # 技能テンプレート
```

## 🚀 使用方法

### 1. ドラッグ&ドロップで実行
1. `.txt`ファイルを選択
2. 対応する`.command`ファイルにドラッグ&ドロップ
3. ターミナルが開いて自動実行

### 2. ツール種類

#### 🔍 記法検証.command
- **用途**: 記法エラーのチェックのみ
- **出力**: エラー箇所とヒントを表示
- **ファイル変更**: なし

#### 📋 記法プレビュー.command  
- **用途**: 修正内容の事前確認
- **出力**: 修正前後の差分をカラー表示
- **ファイル変更**: なし

#### 🔧 記法修正.command
- **用途**: 実際のファイル修正
- **出力**: 修正結果レポート
- **ファイル変更**: あり（自動修正実行）

## 💡 開発ワークフロー

### 記法問題の発見・修正

1. **エラー発見**: `記法検証.command` でエラーチェック
2. **修正確認**: `記法プレビュー.command` で修正内容プレビュー
3. **自動修正**: `記法修正.command` で実際の修正実行

### トークン消費量削減

**従来**: 手動でファイル読み込み・修正・テスト = 大量トークン消費  
**改善後**: ファイルをD&Dして自動処理 = **90%以上削減**

## 📝 サンプルファイル説明

| ファイル | 用途 | 内容 |
|---------|------|------|
| `基本記法サンプル.txt` | 学習・参考 | 正しいKumihan記法の基本例 |
| `記法エラーサンプル.txt` | テスト | 意図的なエラーがある修正テスト用 |
| `01-quickstart.txt` | チュートリアル | クイックスタート用サンプル |
| `02-basic.txt` | 基本学習 | 基本的な記法パターン |
| `03-comprehensive.txt` | 応用学習 | 包括的な記法パターン |
| `*-template.txt` | 実用 | CoC6th用の実践テンプレート |

## 🔧 技術詳細

- **自動修正エンジン**: `dev/tools/syntax_fixer.py`
- **対応エラー**: 
  - 不完全ブロック構造
  - 連続マーカー統合
  - 不要な空マーカー削除
- **出力形式**: カラー差分表示、統計レポート

## ⚡ 効果

- **開発効率**: ファイルD&Dだけで記法問題を即解決
- **トークン節約**: 手動修正作業を自動化
- **品質向上**: 一貫性のある記法修正