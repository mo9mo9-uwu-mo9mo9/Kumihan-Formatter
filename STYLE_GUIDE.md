# Kumihan-Formatter スタイルガイド

> **正しい記法の使用ガイドライン**

---

## 📋 基本原則

### 1. シンプルさを重視
- 複雑な組み合わせより、シンプルで読みやすい記法を優先
- 必要最小限の装飾で十分な表現力を確保

### 2. 一貫性の保持
- 同じ意味の装飾には同じ記法を使用
- プロジェクト内で記法の使い方を統一

### 3. 可読性の確保
- ソースファイルが人間にとって読みやすいこと
- HTML出力も見やすく構造化されること

---

## ✅ 推奨記法パターン

### 📝 **基本的な文書構造**

```text
;;;見出し1
章タイトル
;;;

段落は空行で区切ります。
これは同じ段落の続きです。

新しい段落です。

;;;見出し2
節タイトル
;;;
```

**✅ Good:** 階層構造が明確で読みやすい

### 🎨 **文字装飾**

```text
;;;太字
重要な情報
;;;

;;;イタリック
補足説明
;;;

;;;太字+イタリック
非常に重要な情報
;;;
```

**✅ Good:** 目的に応じた適切な強調

### 📦 **ブロック要素**

```text
;;;枠線
注意事項をまとめたブロック
;;;

;;;ハイライト color=#ffe6e6
警告メッセージ
;;;

;;;見出し3+枠線+ハイライト color=#f0f8ff
見出し付きの情報ボックス
;;;
```

**✅ Good:** 視覚的に分かりやすい情報整理

### 📋 **リスト記法**

```text
基本リスト：
- 項目1
- 項目2
- 項目3

装飾付きリスト：
- ;;;太字;;; 重要項目
- ;;;枠線;;; 注目項目
- ;;;ハイライト color=#e6ffe6;;; 成功メッセージ

階層リスト：
- 大項目1
  - 小項目1-1
  - 小項目1-2
- 大項目2
  - 小項目2-1
```

**✅ Good:** 構造化された情報表現

---

## ❌ 避けるべき記法

### 🚫 **非サポート記法の使用**

```text
❌ Bad:
# これはMarkdown記法です（非サポート）
**太字**（非サポート）
*イタリック*（非サポート）

✅ Good:
;;;見出し1
これは正しい見出し記法です
;;;

;;;太字
正しい太字記法
;;;
```

### 🚫 **color属性の誤用**

```text
❌ Bad:
;;;ハイライト color=#ff0000+太字;;;
（color属性の後に + は使えません）

✅ Good:
;;;太字+ハイライト color=#ff0000;;;
（+ の順序を正しく）
```

### 🚫 **目次マーカーの手動使用**

```text
❌ Bad:
;;;目次;;;
（手動で目次マーカーを書くのは禁止）

✅ Good:
（目次は自動生成されるため、マーカー不要）
```

### 🚫 **ブロックの不完全な閉じ**

```text
❌ Bad:
;;;枠線
内容
（閉じマーカーがない）

✅ Good:
;;;枠線
内容
;;;
```

---

## 🎨 色指定ガイドライン

### 推奨カラーパレット

| 用途 | 色コード | 見た目 | 使用例 |
|------|---------|-------|--------|
| **情報** | `#e6f3ff` | 💙 淡い青 | 通常の情報表示 |
| **成功** | `#e6ffe6` | 💚 淡い緑 | 成功メッセージ |
| **警告** | `#fff0e6` | 🧡 淡いオレンジ | 注意喚起 |
| **エラー** | `#ffe6e6` | ❤️ 淡い赤 | エラー・危険 |
| **ハイライト** | `#ffd` | 💛 淡い黄 | 重要な強調 |

### 色指定の記法例

```text
;;;ハイライト color=#e6f3ff
情報表示ブロック
;;;

;;;ハイライト color=#e6ffe6
成功メッセージ
;;;

;;;ハイライト color=#ffe6e6
警告メッセージ
;;;
```

---

## 🏗️ 複合記法のガイドライン

### ネスト順序ルール

複合キーワードは以下の順序でネストされます：

1. **見出し**（`見出し1`〜`見出し5`）- 最外側
2. **ハイライト**（`ハイライト`）
3. **枠線**（`枠線`）
4. **太字**（`太字`）
5. **イタリック**（`イタリック`）- 最内側

### 推奨組み合わせ

```text
;;;見出し2+太字;;;
重要な節見出し
;;;

;;;枠線+ハイライト color=#f0f8ff;;;
情報ボックス
;;;

;;;太字+イタリック;;;
強調された補足説明
;;;
```

### 避けるべき複雑な組み合わせ

```text
❌ 複雑すぎる例:
;;;見出し1+見出し2+枠線+ハイライト color=#ff0000+太字+イタリック;;;
（組み合わせが多すぎて可読性が低下）

✅ シンプルな例:
;;;見出し2+太字;;;
または
;;;枠線+ハイライト color=#e6f3ff;;;
```

---

## 📊 品質チェックリスト

### ✅ 記法チェック項目

- [ ] 非サポート記法（# 見出し、**太字** など）を使用していない
- [ ] すべてのブロックが正しく閉じられている
- [ ] color属性の順序が正しい（`;;;キーワード+ハイライト color=#xxx;;;`）
- [ ] 目次マーカー（`;;;目次;;;`）を手動で使用していない
- [ ] 複合マーカーが過度に複雑でない

### 📈 可読性チェック項目

- [ ] 見出し階層が論理的である
- [ ] 色使いが一貫している
- [ ] リスト構造が分かりやすい
- [ ] ブロック要素の使い分けが適切である

### 🎯 ユーザビリティチェック項目

- [ ] 初心者にも理解しやすい記法を使用している
- [ ] 装飾の意味が明確である
- [ ] 出力HTMLが見やすい

---

## 🔧 自動検証ツール

記法の正しさは以下のツールで自動チェックできます：

```bash
# 単一ファイルのチェック
python dev/tools/syntax_validator.py examples/sample.txt

# 複数ファイルのチェック
python dev/tools/syntax_validator.py examples/*.txt

# テストスイートの実行
python -m pytest dev/tests/test_syntax_validation.py -v
```

---

## 📚 学習リソース

### 基本記法
- [SPEC.md](SPEC.md) - 完全な記法仕様
- [examples/](examples/) - 実践的なサンプル集

### 開発者向け
- [CONTRIBUTING.md](CONTRIBUTING.md) - 開発ガイドライン
- [dev/tools/syntax_validator.py](dev/tools/syntax_validator.py) - 検証ツール

---

**このスタイルガイドに従うことで、一貫性があり読みやすい文書を作成できます。**