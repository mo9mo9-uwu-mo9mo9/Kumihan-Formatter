# Claude Code セットアップキット v2.0

> Kumihan-FormatterのAI最適化Claude Code設定（serena-expert統合）を他プロジェクトに一発展開するツール  
> **最新版**: AI運用7原則、serena-expert絶対必須システム対応使用時に警告・停止が発生**
- ✅ **SubAgent が自動選択される**

### 🔍 Serena-Expert強制システム動作テスト

```bash
# 正常な使用パターン（推奨）
mcp__serena__find_symbol
mcp__serena__replace_symbol_body

# 禁止パターン（自動検出・停止）
Edit  # → 即座に停止・警告
Read  # → 即座に停止・警告
```

## 📋 対応言語・フレームワーク

| 言語 | フォーマッター | リンター | 型チェッカー | テストランナー |
|------|------------|---------|-------------|-------------|
| **Python** | black | flake8 | mypy | pytest |
| **JavaScript/TypeScript** | prettier | eslint | typescript | jest |
| **Go** | gofmt | golangci-lint | go | go test |
| **Rust** | rustfmt | clippy | rustc | cargo test |

### 追加言語サポート

`project_config.yaml`の`language_configs`セクションに追加：

```yaml
language_configs:
  Java:
    formatter: "google-java-format"
    linter: "checkstyle"
    type_checker: "javac"
    test_runner: "junit"
```

## 🎛️ 高度な機能

### SubAgent自動選択

セットアップ後、以下が自動で利用可能：

```bash
# 自動でSerena Expertが選択される
/serena "新しい機能を実装したい"
/serena "コードをリファクタリングしたい"  
/serena "バグを修正したい"
```

### 権限管理システム

170+項目の詳細な権限設定：
- Git操作（add, commit, push, pull, merge, rebase等）
- テスト実行（pytest, make test等）
- コード品質（lint, format, type check等）
- プロジェクト固有コマンド
- MCP操作（serena, context7等）

### Issue管理自動化

```bash
# ラベル付与が自動化される
gh issue create --title "バグ修正" --body "内容" --label "バグ,優先度:高,難易度:普通,コンポーネント:API"
```

## 🔍 トラブルシューティング

### よくある問題

**Q: MCPサーバーが接続されない**
```bash
# MCP接続状況確認
claude mcp list

# 個別サーバー確認
claude mcp test serena
```

**Q: CLAUDE.mdが読み込まれない**
```bash
# ファイル存在確認
ls -la CLAUDE.md

# 権限確認
chmod 644 CLAUDE.md
```

**Q: SubAgentが自動選択されない**
```bash
# SubAgent設定確認
cat .claude/subagents.json

# セッション再起動
exit  # Claude Codeを終了
claude  # 再起動
```

### デバッグモード

```bash
# 詳細ログ付きでセットアップ
python claude-setup-kit/setup.py \\
  --project-name "DebugProject" \\
  --project-path "/tmp/debug" \\
  --verbose
```

## 📊 使用例

### 実際のプロジェクト例

```bash
# React + TypeScriptプロジェクト
python claude-setup-kit/setup.py \\
  --project-name "MyReactApp" \\
  --project-path "/Users/dev/my-react-app" \\
  --language "JavaScript" \\
  --config react-config.yaml

# FastAPIプロジェクト  
python claude-setup-kit/setup.py \\
  --project-name "MyFastAPI" \\
  --project-path "/Users/dev/my-fastapi" \\
  --language "Python" \\
  --config fastapi-config.yaml

# マイクロサービス
python claude-setup-kit/setup.py \\
  --project-name "UserService" \\
  --project-path "/Users/dev/microservices/user-service" \\
  --language "Go" \\
  --with-hooks
```

## 🔄 更新・メンテナンス

### キットの更新

```bash
# 最新版をKumihan-Formatterから取得
cd /path/to/Kumihan-Formatter
cp -r claude-setup-kit /path/to/new-location
```

### 設定の更新

```bash
# 既存プロジェクトの設定更新
python claude-setup-kit/setup.py \\
  --project-name "ExistingProject" \\
  --project-path "/path/to/existing" \\
  --update-only
```

## 🤝 コントリビューション

新しい言語サポートやテンプレート改善の提案を歓迎します：

1. `templates/` に新しいテンプレート追加
2. `project_config.yaml` に言語設定追加  
3. `setup.py` に処理ロジック追加
4. 動作テスト実施
5. PR作成

## 📜 ライセンス

Kumihan-Formatterプロジェクトと同じライセンスに従います。

---

**🎉 高度なClaude Code環境を他プロジェクトでも活用しましょう！**

*Generated by Claude Code Setup Kit v2.0 - Powered by Kumihan-Formatter*