# Pre-commit hooksè¨­å®š - Issue #1239: å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ å†æ§‹ç¯‰
# ãƒ­ãƒ¼ã‚«ãƒ«å“è³ªä¿è¨¼ã«ç‰¹åŒ–ã—ãŸè»½é‡è¨­å®š

repos:
  # 1. ãƒ­ãƒ¼ã‚«ãƒ«Makefileãƒ™ãƒ¼ã‚¹å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
  - repo: local
    hooks:
      - id: kumihan-quality-check
        name: ğŸ›¡ï¸ Kumihanå“è³ªãƒã‚§ãƒƒã‚¯
        entry: make
        args: [quality-check]
        language: system
        pass_filenames: false
        stages: [commit]

      - id: kumihan-dependency-audit
        name: ğŸ“‹ ä¾å­˜é–¢ä¿‚ç›£æŸ»
        entry: make
        args: [dependency-audit]
        language: system
        pass_filenames: false
        stages: [push]

  # 2. åŸºæœ¬ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆé«˜é€Ÿï¼‰
  - repo: https://github.com/psf/black
    rev: '23.12.1'
    hooks:
      - id: black
        name: ğŸ¨ Black ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        args: [--line-length=88]

  # 3. Importæ•´ç†ï¼ˆä¾å­˜é–¢ä¿‚æœ€é©åŒ–æ”¯æ´ï¼‰
  - repo: https://github.com/pycqa/isort
    rev: '5.13.2'
    hooks:
      - id: isort
        name: ğŸ“¦ Importæ•´ç†
        args: [--profile, black]

  # 4. åŸºæœ¬æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: 'v4.5.0'
    hooks:
      - id: check-yaml
        name: âœ… YAMLæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
      - id: check-toml
        name: âœ… TOMLæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
      - id: check-merge-conflict
        name: ğŸ” ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆæ¤œå‡º
      - id: trailing-whitespace
        name: ğŸ§¹ æœ«å°¾ç©ºç™½å‰Šé™¤
      - id: end-of-file-fixer
        name: ğŸ“ EOFä¿®æ­£

# å®Ÿè¡Œè¨­å®š
default_stages: [commit]
fail_fast: false  # å…¨ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œï¼ˆå•é¡Œç®‡æ‰€ç‰¹å®šã®ãŸã‚ï¼‰

# é™¤å¤–è¨­å®š
exclude: |
  (?x)(
      ^tmp/|
      ^build/|
      ^dist/|
      \.egg-info/|
      __pycache__/
  )

# Issue #1239å¯¾å¿œãƒ¡ãƒ¢:
# - GitHub Actionsç„¡åŠ¹ã®ãŸã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«å“è³ªãƒã‚§ãƒƒã‚¯ã«ç‰¹åŒ–
# - Makefileãƒ™ãƒ¼ã‚¹ã®çµ±åˆå“è³ªç®¡ç†ã‚’æ´»ç”¨
# - è»½é‡è¨­å®šã§é–‹ç™ºåŠ¹ç‡ã‚’ç¶­æŒ
# - ä¾å­˜é–¢ä¿‚ç›£æŸ»ã‚’pushæ™‚ã«å®Ÿè¡Œï¼ˆé »åº¦åˆ¶å¾¡ï¼‰