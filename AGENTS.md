# Repository Guidelines

## Project Structure & Module Organization
- Source: `kumihan_formatter/` (CLI entry: `project.scripts.kumihan` â†’ `core.utilities.api_utils:main`).
- Tests: `tests/unit/`, `tests/integration/`ï¼ˆå¿…è¦ã«å¿œã˜ã¦ `tests/performance/`, `tests/manual/`ï¼‰ã€‚
- Support: `scripts/`, `examples/`, `output/`, `tmp/`, `.github/`ã€‚
- Config: `pyproject.toml`, `Makefile`, `.pre-commit-config.yaml`ã€‚

## Build, Test, and Development Commands
- åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—: `make setup`ï¼ˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆä¾å­˜ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰ã€‚
- ä¸»è¦å“è³ªãƒã‚§ãƒƒã‚¯: `make quality-check`ï¼ˆä¾å­˜ç›£æŸ»â†’lintâ†’unitâ†’æ€§èƒ½ï¼‰ã€‚
- Lint: `make lint` / å³æ ¼ç‰ˆ: `make lint-strict`ã€‚
- ãƒ†ã‚¹ãƒˆ: `make test`ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãï¼‰/ `make test-unit` / `make test-integration`ã€‚
- äº‹å‰ãƒ•ãƒƒã‚¯: `make pre-commit`ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«çµ±åˆãƒã‚§ãƒƒã‚¯ï¼‰ã€‚
- å®Ÿè¡Œä¾‹: `kumihan <å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«> [å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«]`ï¼é–‹ç™ºä¸­ã¯ `python -m kumihan_formatter <å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«> [å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«]`ã€‚

## Coding Style & Naming Conventions
- ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿: Blackï¼ˆè¡Œé•· 88ï¼‰ã€‚ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ: 4ã‚¹ãƒšãƒ¼ã‚¹ã€‚
- å‹: mypy strict å¿…é ˆã€‚ã™ã¹ã¦ã®æ–°è¦/å¤‰æ›´é–¢æ•°ã«å‹æ³¨é‡ˆã€‚
- å‘½å: modules/files = `snake_case`ã€classes = `PascalCase`ã€functions/vars = `snake_case`ã€constants = `UPPER_SNAKE_CASE`ã€‚
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ/ã‚¢ã‚»ãƒƒãƒˆã¯ `kumihan_formatter/templates|assets` ã«é…ç½®ã€‚

## Testing Guidelines
- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: pytestï¼ˆ`pyproject.toml`ã«è¨­å®šï¼‰ã€‚
- å®Ÿè¡Œ: `pytest -q` ã‚‚å¯ã€‚ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯ HTML ã‚’ `tmp/htmlcov/` ã«å‡ºåŠ›ã€‚
- ã—ãã„å€¤: ç¾åœ¨ `--cov-fail-under=20`ï¼ˆæ®µéšçš„ã«å¼•ãä¸Šã’äºˆå®šã€#1280/#1307å‚ç…§ï¼‰ã€‚
- å‘½å: ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `test_*.py`ã€é–¢æ•°ã¯ `test_*`ã€‚`@pytest.mark.unit|integration|slow|e2e` ã‚’é©åˆ‡ã«ä»˜ä¸ã€‚

## Commit & Pull Request Guidelines
- ã‚³ãƒŸãƒƒãƒˆå‚¾å‘: å…ˆé ­ã«çµµæ–‡å­—ï¼‹ç¨®åˆ¥ï¼‹Issueå‚ç…§ï¼ˆä¾‹: `ğŸ¯ Fix #1234: èª¬æ˜`ï¼‰ã€‚ä¸»èªçœç•¥ãƒ»å‘½ä»¤å½¢ã§è¦ç‚¹ã‚’çŸ­ãã€‚
- ãƒ–ãƒ©ãƒ³ãƒè¦ç´„: `{type}/issue-{ç•ªå·}-{è‹±èªæ¦‚è¦}`ï¼ˆä¾‹: `feat/issue-123-add-user-auth`ï¼‰ã€‚æ—¥æœ¬èªãƒ–ãƒ©ãƒ³ãƒåã¯ç¦æ­¢ã€‚
- PR è¦ä»¶: ç›®çš„ãƒ»å¤‰æ›´ç‚¹ãƒ»é–¢é€£Issueï¼ˆ`Closes #123`ï¼‰ãƒ»å‹•ä½œç¢ºèªãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ/å‡ºåŠ›ä¾‹ï¼ˆå¿…è¦æ™‚ï¼‰ã€‚`make lint` ã¨ `make test` ãŒé€šã‚‹ã“ã¨ã€‚å¿…è¦ã«å¿œã˜ã¦ `CHANGELOG.md` æ›´æ–°ã€‚

## Security & Configuration Tips
- Python 3.12 ä»¥ä¸Šã‚’ä½¿ç”¨ã€‚æ©Ÿå¯†æƒ…å ±ã‚’ã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼ˆç’°å¢ƒå¤‰æ•°ã§æ³¨å…¥ï¼‰ã€‚
- ä¾å­˜ç›£æŸ»: `make dependency-audit`ã€‚ä¸€æ™‚ç”Ÿæˆç‰©ã¯ `tmp/` é…ä¸‹ã«é™å®šã€‚
- å¤§ããªå¤‰æ›´ã¯å°ã•ãªPRã«åˆ†å‰²ã—ã€`quality-check` ã‚’é€šã—ã¦ã‹ã‚‰æå‡ºã€‚

## Agent-Specific Instructions
- æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆBlack/mypy/pytest/Makefileï¼‰ã®éµå®ˆã‚’æœ€å„ªå…ˆã€‚
- æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ—¢å­˜ã®é…ç½®ãƒ«ãƒ¼ãƒ«ã¨å‘½åã«åˆã‚ã›ã€æœ€å°é™ã®å·®åˆ†ã§ææ¡ˆã€‚
- ææ¡ˆå‰ã« `make lint` ã¨ `make test` ã‚’ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã—ã¦è‡ªå·±æ¤œè¨¼ã€‚

### Communication & Language Policyï¼ˆè¨€èªãƒãƒªã‚·ãƒ¼ï¼‰
- æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ã‚„ã‚Šã¨ã‚Šï¼ˆIssue/PRã®ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€è¨­è¨ˆãƒ¡ãƒ¢ã€ã‚„ã‚Šã¨ã‚Šã®æ–‡ç« ï¼‰ã¯åŸå‰‡ã™ã¹ã¦æ—¥æœ¬èªã§è¡Œã†ã“ã¨ã€‚
- ä¾‹å¤–: ã‚³ãƒ¼ãƒ‰ã€è­˜åˆ¥å­ï¼ˆé–¢æ•°åãƒ»ã‚¯ãƒ©ã‚¹åãƒ»å¤‰æ•°åç­‰ï¼‰ã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯è‹±èªï¼ˆæ—¢å­˜è¦ç´„ã©ãŠã‚Šï¼‰ã€‚
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ/ãƒœãƒƒãƒˆã®å¿œç­”æ—¢å®šè¨€èªã‚‚æ—¥æœ¬èªã¨ã—ã€ç‰¹æ®µã®æŒ‡å®šãŒãªã„é™ã‚Šè‹±èªè¿”ä¿¡ã¯ç¦æ­¢ã€‚


## Automation Workflow (Fully Auto)
- æ‰‹é †: 1) Issueä½œæˆ â†’ 2) Issueã«åŸºã¥ãä½œæ¥­ â†’ 3) ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ 4) æ”¹å–„å®Ÿè£… â†’ 5) æœ€å°å·®åˆ†PRä½œæˆ â†’ 6) 3-5ã‚’ãƒ«ãƒ¼ãƒ— â†’ å•é¡ŒãŒãªããªã£ãŸã‚‰PRã‚’ãƒãƒ¼ã‚¸ï¼ˆsquashï¼‰â†’ ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤ã€‚
- æ¨©é™/å‰æ: ghèªè¨¼æ¸ˆã¿ã€ãƒ–ãƒ©ãƒ³ãƒä¿è­·ã§å¿…é ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å¿…é ˆCIã‚’è¦æ±‚ã—ãªã„ï¼ˆã¾ãŸã¯ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼è¨±å¯ï¼‰ã€‚GitHub Actionsã¯å°å…¥ã—ãªã„ã€‚
- å“è³ªã‚²ãƒ¼ãƒˆ: `scripts/run_quality_check.sh` ã‚’ç”¨ã„ã€`make lint && make test` æˆåŠŸã‚’å¿…é ˆã¨ã™ã‚‹ã€‚
- ãƒ©ãƒ™ãƒ«: `P0`/`P1`/`P2` ã‚’æ¨™æº–åŒ–ã€‚`scripts/set_issue_priorities.sh` ã§ä¸€æ‹¬ä»˜ä¸å¯èƒ½ã€‚
- PRé‹ç”¨: æœ€å°å·®åˆ†ãƒ»1Issue=1PRã€‚`scripts/create_minimal_pr.sh` ã§PRä½œæˆã€`scripts/pr_merge_and_cleanup.sh` ã§squashãƒãƒ¼ã‚¸ã¨ãƒ–ãƒ©ãƒ³ãƒæƒé™¤ã€‚
- ãƒ­ã‚°: è‡ªå‹•åŒ–ãƒ­ã‚°ã¯ `tmp/automation-logs/` ã«ä¿å­˜ï¼ˆgitç®¡ç†å¤–ï¼‰ã€‚

## Deprecation Policyï¼ˆæ®µéšçš„å»ƒæ­¢æ–¹é‡ï¼‰
- ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆç›®å®‰ï¼‰:
  - Phase 1ï¼ˆã€œ2025-09-15ï¼‰: DeprecationWarning æ˜ç¤ºãƒ»ç§»è¡Œæ¡ˆå†…ï¼»å®Œäº†ï¼½
  - Phase 2ï¼ˆã€œ2025-10-15ï¼‰: äº’æ›ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’éå…¬é–‹åŒ–ï¼ˆãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆåœæ­¢ï¼‰ï¼»å®Œäº†ï¼½
  - Phase 3ï¼ˆã€œ2025-11-30ï¼‰: ãƒ¬ã‚¬ã‚·ãƒ¼APIã®å‰Šé™¤ï¼ˆä¸»è¦å¯¾è±¡ã¯å®Œäº†ï¼‰
- è©³ç´°ã‚¬ã‚¤ãƒ‰: docs/DEPRECATION_MIGRATION.mdï¼ˆç§»è¡Œå…ˆãƒ»ä¾‹ãƒ»æœŸæ—¥ã‚’æ˜è¨˜ï¼‰

## å…¬é–‹APIï¼ˆç¾æ™‚ç‚¹ï¼‰
- ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰: `kumihan_formatter.parser.Parser`, `kumihan_formatter.parser.parse`
- çµ±åˆAPI: `kumihan_formatter.unified_api.KumihanFormatter`
- æ§‹æ–‡ãƒã‚§ãƒƒã‚¯: `kumihan_formatter.core.syntax.SyntaxReporter`, `check_files`, `format_error_report`
- ASTãƒãƒ¼ãƒ‰: `kumihan_formatter.core.ast_nodes.node.Node`, `...factories.*`ï¼ˆç›´æ¥importæ¨å¥¨ï¼‰
- äº’æ›ãƒ¬ã‚¤ãƒ¤ï¼ˆæœ€å°ï¼‰: `kumihan_formatter.core.utilities.compatibility_layer.MasterParser`, `parse_text`, `parse_file`, `parse_stream`

## GPT-5 Best Practicesï¼ˆ2025-09 æœ€æ–°ï¼‰
- **æ¨å¥¨ãƒ¢ãƒ‡ãƒ«:** `gpt-5`ï¼ˆé«˜å“è³ªï¼‰/ `gpt-5-mini`ï¼ˆä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰/ `gpt-5-nano`ï¼ˆå¤§é‡ä¸¦åˆ—ãƒ»CIå‘ã‘ï¼‰ã€‚CLIã®æ—¢å®šã¯ `gpt-5`ã€‚
- **æ–°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:** `reasoning_effort` ã¨ `verbosity` ã«å¯¾å¿œã€‚
  - `reasoning_effort`: `minimal`/`low`/`medium`(æ—¢å®š)/`high`ã€‚CLIã¯æ—¢å®š `low`ã€æ·±ã„åˆ†æãŒå¿…è¦ãªã¨ãã®ã¿ `medium/high` ã‚’ä½¿ç”¨ã€‚
  - `verbosity`: `low`/`medium`(æ—¢å®š)/`high`ã€‚CLIã®å¯¾è©±ã¯ `low` ã‚’åŸºæœ¬ã«ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã‚„è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿ `medium/high` ã‚’ä½¿ç”¨ã€‚
- **ãƒ¢ãƒ‡ãƒ«é¸æŠæŒ‡é‡:**
  - **è¨ˆç”»/è¨­è¨ˆ/é›£æ‰€ãƒ‡ãƒãƒƒã‚°:** `gpt-5` + `reasoning_effort=medium`ã€‚
  - **åå¾©çš„ãªç·¨é›†/å°ä¿®æ­£:** `gpt-5-mini` + `reasoning_effort=low` + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€‚
  - **å¤§è¦æ¨¡ãƒãƒƒãƒæ•´å½¢/ç§»è¡Œ:** `gpt-5-nano` + Batch APIï¼ˆå¾Œè¿°ï¼‰ã€‚

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ/ãƒ„ãƒ¼ãƒ«åˆ©ç”¨
- **ã‚·ã‚¹ãƒ†ãƒ æŒ‡ç¤º:** å½¹å‰²ãƒ»å‡ºåŠ›å½¢å¼ãƒ»å®‰å…¨å¢ƒç•Œï¼ˆç¦æ­¢äº‹é …/ãƒ‡ãƒ¼ã‚¿å–ã‚Šæ‰±ã„ï¼‰ã‚’æ˜ç¢ºåŒ–ã€‚CLIã¯ã€Œç°¡æ½”ãƒ»æ ¹æ‹ æç¤ºãƒ»å®‰å…¨ç¬¬ä¸€ã€ã‚’æ—¢å®šã®åŸå‰‡ã«ã™ã‚‹ã€‚
- **ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆï¼ˆå‰ç½®ãï¼‰:** ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œå‰ã«1è¡Œã§ã€Œä½•ã‚’ãƒ»ãªãœã€ã‚’å®£è¨€ï¼ˆä¾‹:ã€Œä¾å­˜ç›£æŸ»ã®PythonåŒ–ã‚’PRåŒ–ã—ã¾ã™ã€ï¼‰ã€‚
- **Structured Outputs:** å¯èƒ½ãªé™ã‚ŠJSON Schemaã‚’å®šç¾©ã—ã€å³æ ¼ãªå‹ã§å—ã‘å–ã‚‹ï¼ˆç†ç”±: å¾Œå·¥ç¨‹ã®è‡ªå‹•å‡¦ç†ãƒ»å¤±æ•—å¾©å…ƒãŒå®¹æ˜“ï¼‰ã€‚
- **Tool Calling:**
  - å¤±æ•—ã«å¼·ã„å®Ÿè£…ã«ã™ã‚‹ï¼ˆãƒ„ãƒ¼ãƒ«ã®ä¾‹å¤–â†’è¦ç´„ã—ã¦å†è©¦è¡Œãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã€‚
  - å¯èƒ½ãªå ´åˆã¯ä¸¦åˆ—å®Ÿè¡Œã‚’ä½¿ã„ã€é•·æ™‚é–“ã‚¸ãƒ§ãƒ–ã¯ç²’åº¦ã‚’å°ã•ãåˆ†å‰²ã€‚
  - ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã€ã®æ–‡æ³•åˆ¶ç´„ï¼ˆCFGï¼‰ã‚’æ´»ç”¨ã—ã€ãƒ†ã‚­ã‚¹ãƒˆå¼•æ•°ã§ã‚‚å …ç‰¢æ€§ã‚’ç¢ºä¿ã€‚
- **Web/File Search:** ã€Œæœ€æ–°ã€ã€Œä¾¡æ ¼ã€ã€Œè¦ç´„ã€ã€Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã€Œå›ºæœ‰åè©ã€ãªã©æ™‚é–“å¤‰åŒ–ã®å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã¯å¿…ãšæ¤œç´¢â†’æ ¹æ‹ ã‚’æ·»ä»˜ã€‚

### å¿œç­”å“è³ª/å®‰å…¨
- **ä½å†—é•·:** æ—¢å®š `verbosity=low`ã€‚èª¬æ˜ã¯å¿…è¦æœ€å°é™ã€æ ¹æ‹ ã‚„é¸æŠè‚¢ãŒä¾¡å€¤ã‚’ç”Ÿã‚€æ™‚ã®ã¿å±•é–‹ã€‚
- **æœ€å°æ€è€ƒ:** ã¾ãš `reasoning_effort=low`ï¼ˆã‚‚ã—ãã¯ `minimal`ï¼‰ã€‚å¤±æ•—/ã‚ã„ã¾ã„ã•æ¤œå‡ºæ™‚ã«æ®µéšçš„ã«å¼•ãä¸Šã’ã‚‹ã€‚
- **å®‰å…¨é…æ…®:** ãƒãƒªã‚·ãƒ¼ã«æŠµè§¦ã™ã‚‹ä¾é ¼ã¯ä»£æ›¿æ¡ˆã¨æ–¹é‡èª¬æ˜ã§èª˜å°ã€‚ãƒªã‚¹ã‚¯ã®é«˜ã„æ“ä½œã¯æ˜ç¤ºã®åˆæ„ã‚’å–ã‚‹ã€‚

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹/ã‚³ã‚¹ãƒˆæœ€é©åŒ–
- **Prompt Caching:** ç¹°ã‚Šè¿”ã—ä½¿ã†é•·ã„ã‚·ã‚¹ãƒ†ãƒ /ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå¤§è¦æ¨¡å¯¾è©±ã§åŠ¹æœå¤§ï¼‰ã€‚
- **Batch API:** éåŒæœŸãƒãƒ«ã‚¯å‡¦ç†ã¯Batchã§50%å‰²å¼•ã€‚ã‚­ãƒ¥ãƒ¼ä¸Šé™/ãƒ¬ãƒ¼ãƒˆã¯ãƒ¢ãƒ‡ãƒ«ã”ã¨ã«ç•°ãªã‚‹ãŸã‚ã€ç›£è¦–ã¨ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥ã‚’çµ„ã¿è¾¼ã‚€ã€‚
- **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°:** CLIå¯¾è©±ã¯SSEã‚¹ãƒˆãƒªãƒ¼ãƒ ã§æ—©æœŸå¯è¦–åŒ–ã€‚ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã¨ä¸¦è¡Œã—ã¦é€²æ—ã‚’æç¤ºã€‚
- **ãƒ¢ãƒ‡ãƒ«ã®ç²’åº¦:** å°ã‚¿ã‚¹ã‚¯ã¯ `mini/nano` ã§é«˜é€ŸåŒ–ã—ã€é›£æ‰€ã®ã¿ `gpt-5` ã«ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### å†ç¾æ€§/é‹ç”¨
- **æ±ºå®šæ€§:** `seed` ã‚’è¨­å®šã—ã¦å·®åˆ†æ¤œè¨¼ã‚’å®¹æ˜“ã«ã€‚å‡ºåŠ›å½¢å¼ã¯Structured Outputsã§å›ºå®šåŒ–ã€‚
- **è©•ä¾¡/Evals:** é‡è¦ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯å›å¸°ç”¨ã®ã‚¹ãƒ¢ãƒ¼ã‚¯Evalsã‚’ç”¨æ„ã—ã€ãƒ¢ãƒ‡ãƒ«/ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ›´æ™‚ã«è‡ªå‹•æ¤œè¨¼ã€‚
- **ãƒ­ã‚®ãƒ³ã‚°:** å…¥å‡ºåŠ›ãƒ»ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãƒ»ãƒ¢ãƒ‡ãƒ«/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚’è¨˜éŒ²ã€‚æ©Ÿå¯†ã¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é™å®šã™ã‚‹ã€‚

### CLIå®Ÿè£…è¦ç´„ï¼ˆGPT-5å¯¾å¿œï¼‰
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:** `gpt-5`, `reasoning_effort=low`, `verbosity=low`, ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ‰åŠ¹ã€‚
- **é•·æ™‚é–“å‡¦ç†:** äº‹å‰ã«Planã‚’æç¤ºâ†’ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã”ã¨ã«ã‚³ãƒŸãƒƒãƒˆãƒã‚¤ãƒ³ãƒˆã‚’è¨­ã‘ã‚‹ï¼ˆIssue-firsté‹ç”¨ï¼‰ã€‚
- **å¤±æ•—æ™‚ã®ãµã‚‹ã¾ã„:** åŸå› â†’æœ€å°ä¿®æ­£â†’å†å®Ÿè¡Œã®é †ã«å ±å‘Šã€‚å¤–éƒ¨ä¾å­˜ï¼ˆãƒãƒƒãƒˆ/æ¨©é™/ãƒ¬ãƒ¼ãƒˆï¼‰èµ·å› ã¯å¾…é¿ç­–ã‚‚æç¤ºã€‚
- **æ ¹æ‹ æç¤º:** ã‚¦ã‚§ãƒ–å‚ç…§ã¯å‡ºå…¸ã¨æ—¥æ™‚ã‚’æ˜è¨˜ã—ã€å¤‰åŒ–ç‚¹ï¼ˆä¾¡æ ¼/è¦ç´„ï¼‰ã¯çµ¶å¯¾æ—¥ä»˜ã§è¨˜è¿°ã€‚

## Codex CLI æ—¢å®šè¨­å®šï¼ˆGPTâ€‘5ï¼‰
- ç›®çš„: ã‚³ãƒãƒ³ãƒ‰ä¸€ç™ºã§ã€Œå®‰å…¨ãƒ»ä½å†—é•·ãƒ»ä½æ¨è«–ã‚³ã‚¹ãƒˆã€ã®æ—¢å®šã‚’é©ç”¨ã€‚
- æ—¢å®šå€¤ï¼ˆ2025â€‘09â€‘01ï¼‰:
  - `model`: `gpt-5`ï¼ˆé‡ã‚¿ã‚¹ã‚¯ã¯ `gpt-5-thinking`ã€è»½ã‚¿ã‚¹ã‚¯ã¯ `gpt-5-mini`ï¼‰
  - `reasoning_effort`: `low`ï¼ˆå¿…è¦æ™‚ã®ã¿ `medium/high`ã€‚æ¥µçŸ­å¿œç­”ã¯ `minimal`ï¼‰
  - `verbosity`: `low`ï¼ˆè¨­è¨ˆ/ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿ `medium/high`ï¼‰
  - `stream`: `on`
- æ¨å¥¨èµ·å‹•ä¾‹ï¼ˆç’°å¢ƒå¤‰æ•°ã§æ˜ç¤ºï¼‰:
  - POSIX:
    - `export OPENAI_MODEL=gpt-5`
    - `export OPENAI_REASONING_EFFORT=low`
    - `export OPENAI_VERBOSITY=low`
    - `export OPENAI_STREAMING=true`
  - Windows (PowerShell):
    - `$env:OPENAI_MODEL='gpt-5'`
    - `$env:OPENAI_REASONING_EFFORT='low'`
    - `$env:OPENAI_VERBOSITY='low'`
    - `$env:OPENAI_STREAMING='true'`
- é‹ç”¨ãƒ«ãƒ¼ãƒ«:
  - å°ã•ãªä¿®æ­£/åå¾©ç·¨é›†ã¯ `gpt-5-mini`ã€è¨­è¨ˆãƒ»é›£æ‰€ãƒ‡ãƒãƒƒã‚°ã¯ `gpt-5`ã€å¤§é‡æ•´å½¢ã¯ `gpt-5-nano` ã‚’æ˜ç¤ºé¸æŠã€‚
  - ã€Œã‚‚ã£ã¨è©³ã—ãã€ç­‰ã®æ˜ç¤ºè¦æ±‚ãŒãªã„é™ã‚Š `verbosity=low` ã‚’ç¶­æŒã€‚
  - `reasoning_effort` ã¯å¤±æ•—ã‚„æ›–æ˜§æ€§æ¤œçŸ¥æ™‚ã«æ®µéšå¼•ãä¸Šã’ã€‚

## Serena MCP é€£æºï¼ˆæ¨å¥¨è¨­å®šï¼‰
- ç›®çš„: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ãƒ»è¨˜å·æ“ä½œãƒ»å®‰å…¨ãªç·¨é›†ã‚’MCPçµŒç”±ã§æä¾›ã—ã€CLIã®ç”Ÿç”£æ€§ã‚’åº•ä¸Šã’ã€‚
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š: æœ¬ãƒªãƒã‚¸ãƒˆãƒªã¯ `.serena/project.yml` ã‚’åŒæ¢±ã€‚ä»¥ä¸‹ã‚’æ¨å¥¨:
  - `ignore_all_files_in_gitignore: true`ï¼ˆä¸è¦è³‡ç”£ã®ç´¢å¼•é™¤å¤–ï¼‰
  - `read_only: false`ï¼ˆç·¨é›†ãƒ„ãƒ¼ãƒ«æœ‰åŠ¹åŒ–ï¼‰
  - `excluded_tools: []`ï¼ˆåŸå‰‡ã™ã¹ã¦è¨±å¯ã€‚å±é™ºæ“ä½œã¯CLIå´ã§æ‰¿èªãƒ•ãƒ­ãƒ¼ï¼‰
- åˆå›ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆå¤§è¦æ¨¡æ™‚ãƒ»ä¸€åº¦ã ã‘ï¼‰:
  - `uvx --from git+https://github.com/oraios/serena index-project`ï¼ˆã¾ãŸã¯ `uv run --directory /path/to/serena index-project`ï¼‰
- MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ç™»éŒ²ï¼ˆä¾‹: Claude Desktopï¼‰:
  - `File > Settings > Developer > MCP Servers > Edit Config` ã§ä»¥ä¸‹ã‚’è¿½åŠ ï¼ˆãƒ‘ã‚¹ã¯ç’°å¢ƒã«åˆã‚ã›ã¦èª¿æ•´ï¼‰:
    - `{"mcpServers": {"serena": {"command": "uvx", "args": ["--from", "git+https://github.com/oraios/serena", "serena-mcp-server"]}}}`
  - ä»£æ›¿: `--transport sse --port 9121` ã§å¸¸é§â†’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰SSEæ¥ç¶šã€‚
- æ¨å¥¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ/ãƒ¢ãƒ¼ãƒ‰:
  - `--context ide-assistant`ï¼ˆIDEé€£æºæœ€é©åŒ–ï¼‰
  - `--mode planning --mode editing`ï¼ˆè¨ˆç”»â†’ç·¨é›†ã®å¾€å¾©ã‚’é«˜é€ŸåŒ–ï¼‰
- é‹ç”¨Tips:
  - å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç´¢å¼•å‰æï¼ˆåˆå›ã ã‘æ•°åˆ†ï¼‰ã€‚
  - ãƒ„ãƒ¼ãƒ«åã¯æ˜ç¤ºæŒ‡å®šï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒãƒ¼åã‚’è§£æ±ºã—ãªã„å ´åˆã‚ã‚Šï¼‰ã€‚
  - ã‚¾ãƒ³ãƒ“ãƒ—ãƒ­ã‚»ã‚¹å¯¾ç­–ã«Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–å¯ï¼ˆ`serena_config.yml` ã® `web_dashboard: true`ï¼‰ã€‚
